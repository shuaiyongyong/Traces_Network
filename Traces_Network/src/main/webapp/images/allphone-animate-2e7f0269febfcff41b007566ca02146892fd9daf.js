/* VelocityJS.org (1.2.3). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/* VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */
(function(h){if(h.jQuery){return}var d=function(i,k){return new d.fn.init(i,k)};d.isWindow=function(i){return i!=null&&i==i.window};d.type=function(i){if(i==null){return i+""}return typeof i==="object"||typeof i==="function"?j[b.call(i)]||"object":typeof i};d.isArray=Array.isArray||function(i){return d.type(i)==="array"};function e(l){var k=l.length,i=d.type(l);if(i==="function"||d.isWindow(l)){return false}if(l.nodeType===1&&k){return true}return i==="array"||k===0||typeof k==="number"&&k>0&&(k-1) in l}d.isPlainObject=function(l){var i;if(!l||d.type(l)!=="object"||l.nodeType||d.isWindow(l)){return false}try{if(l.constructor&&!f.call(l,"constructor")&&!f.call(l.constructor.prototype,"isPrototypeOf")){return false}}catch(k){return false}for(i in l){}return i===undefined||f.call(l,i)};d.each=function(p,q,l){var o,m=0,n=p.length,k=e(p);if(l){if(k){for(;m<n;m++){o=q.apply(p[m],l);if(o===false){break}}}else{for(m in p){o=q.apply(p[m],l);if(o===false){break}}}}else{if(k){for(;m<n;m++){o=q.call(p[m],m,p[m]);if(o===false){break}}}else{for(m in p){o=q.call(p[m],m,p[m]);if(o===false){break}}}}return p};d.data=function(l,k,m){if(m===undefined){var n=l[d.expando],i=n&&a[n];if(k===undefined){return i}else{if(i){if(k in i){return i[k]}}}}else{if(k!==undefined){var n=l[d.expando]||(l[d.expando]=++d.uuid);a[n]=a[n]||{};a[n][k]=m;return m}}};d.removeData=function(l,k){var m=l[d.expando],i=m&&a[m];if(i){d.each(k,function(n,o){delete i[o]})}};d.extend=function(){var k,q,l,m,t,r,p=arguments[0]||{},o=1,n=arguments.length,s=false;if(typeof p==="boolean"){s=p;p=arguments[o]||{};o++}if(typeof p!=="object"&&d.type(p)!=="function"){p={}}if(o===n){p=this;o--}for(;o<n;o++){if((t=arguments[o])!=null){for(m in t){k=p[m];l=t[m];if(p===l){continue}if(s&&l&&(d.isPlainObject(l)||(q=d.isArray(l)))){if(q){q=false;r=k&&d.isArray(k)?k:[]}else{r=k&&d.isPlainObject(k)?k:{}}p[m]=d.extend(s,r,l)}else{if(l!==undefined){p[m]=l}}}}}return p};d.queue=function(l,i,n){function k(o,q){var p=q||[];if(o!=null){if(e(Object(o))){(function(v,t){var r=+t.length,s=0,u=v.length;while(s<r){v[u++]=t[s++]}if(r!==r){while(t[s]!==undefined){v[u++]=t[s++]}}v.length=u;return v})(p,typeof o==="string"?[o]:o)}else{[].push.call(p,o)}}return p}if(!l){return}i=(i||"fx")+"queue";var m=d.data(l,i);if(!n){return m||[]}if(!m||d.isArray(n)){m=d.data(l,i,k(n))}else{m.push(n)}return m};d.dequeue=function(i,k){d.each(i.nodeType?[i]:i,function(m,o){k=k||"fx";var l=d.queue(o,k),n=l.shift();if(n==="inprogress"){n=l.shift()}if(n){if(k==="fx"){l.unshift("inprogress")}n.call(o,function(){d.dequeue(o,k)})}})};d.fn=d.prototype={init:function(i){if(i.nodeType){this[0]=i;return this}else{throw new Error("Not a DOM node.")}},offset:function(){var i=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:i.top+(h.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:i.left+(h.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function l(){var n=this.offsetParent||document;while(n&&(!n.nodeType.toLowerCase==="html"&&n.style.position==="static")){n=n.offsetParent}return n||document}var k=this[0],l=l.apply(k),m=this.offset(),i=/^(?:body|html)$/i.test(l.nodeName)?{top:0,left:0}:d(l).offset();m.top-=parseFloat(k.style.marginTop)||0;m.left-=parseFloat(k.style.marginLeft)||0;if(l.style){i.top+=parseFloat(l.style.borderTopWidth)||0;i.left+=parseFloat(l.style.borderLeftWidth)||0}return{top:m.top-i.top,left:m.left-i.left}}};var a={};d.expando="velocity"+(new Date().getTime());d.uuid=0;var j={},f=j.hasOwnProperty,b=j.toString;var g="Boolean Number String Function Array Date RegExp Object Error".split(" ");for(var c=0;c<g.length;c++){j["[object "+g[c]+"]"]=g[c].toLowerCase()}d.fn.init.prototype=d.fn;h.Velocity={Utilities:d}})(window);(function(a){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=a()}else{if(typeof define==="function"&&define.amd){define(a)}else{a()}}}(function(){return function(p,h,o,e){var i=(function(){if(o.documentMode){return o.documentMode}else{for(var y=7;y>4;y--){var z=o.createElement("div");z.innerHTML="<!--[if IE "+y+"]><span></span><![endif]-->";if(z.getElementsByTagName("span").length){z=null;return y}}}return e})();var j=(function(){var y=0;return h.webkitRequestAnimationFrame||h.mozRequestAnimationFrame||function(B){var z=(new Date()).getTime(),A;A=Math.max(0,16-(z-y));y=z+A;return setTimeout(function(){B(z+A)},A)}})();function w(C){var z=-1,A=C?C.length:0,y=[];while(++z<A){var B=C[z];if(B){y.push(B)}}return y}function g(y){if(k.isWrapped(y)){y=[].slice.call(y)}else{if(k.isNode(y)){y=[y]}}return y}var k={isString:function(y){return(typeof y==="string")},isArray:Array.isArray||function(y){return Object.prototype.toString.call(y)==="[object Array]"},isFunction:function(y){return Object.prototype.toString.call(y)==="[object Function]"},isNode:function(y){return y&&y.nodeType},isNodeList:function(y){return typeof y==="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(y))&&y.length!==e&&(y.length===0||(typeof y[0]==="object"&&y[0].nodeType>0))},isWrapped:function(y){return y&&(y.jquery||(h.Zepto&&h.Zepto.zepto.isZ(y)))},isSVG:function(y){return h.SVGElement&&(y instanceof h.SVGElement)},isEmptyObject:function(z){for(var y in z){return false}return true}};var c,x=false;if(p.fn&&p.fn.jquery){c=p;x=true}else{c=h.Velocity.Utilities}if(i<=8&&!x){throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.")}else{if(i<=7){jQuery.fn.velocity=jQuery.fn.animate;return}}var f=400,q="swing";var t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:h.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:o.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:false,calls:[]},CSS:{},Utilities:c,Redirects:{},Easings:{},Promise:h.Promise,defaults:{queue:"",duration:f,easing:q,begin:e,complete:e,progress:e,display:e,visibility:e,loop:false,delay:false,mobileHA:true,_cacheValues:true},init:function(y){c.data(y,"velocity",{isSVG:k.isSVG(y),isAnimating:false,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:false,version:{major:1,minor:2,patch:2},debug:false};if(h.pageYOffset!==e){t.State.scrollAnchor=h;t.State.scrollPropertyLeft="pageXOffset";t.State.scrollPropertyTop="pageYOffset"}else{t.State.scrollAnchor=o.documentElement||o.body.parentNode||o.body;t.State.scrollPropertyLeft="scrollLeft";t.State.scrollPropertyTop="scrollTop"}function b(z){var y=c.data(z,"velocity");return y===null?e:y}function l(y){return function(z){return Math.round(z*y)*(1/y)}}function a(G,K,E,J){var Y=4,F=0.001,R=1e-7,T=10,W=11,X=1/(W-1),aa="Float32Array" in h;if(arguments.length!==4){return false}for(var S=0;S<4;++S){if(typeof arguments[S]!=="number"||isNaN(arguments[S])||!isFinite(arguments[S])){return false}}G=Math.min(G,1);E=Math.min(E,1);G=Math.max(G,0);E=Math.max(E,0);var I=aa?new Float32Array(W):new Array(W);function N(A,B){return 1-3*B+3*A}function M(A,B){return 3*B-6*A}function L(A){return 3*A}function D(C,A,B){return((N(A,B)*C+M(A,B))*C+L(A))*C}function Z(C,A,B){return 3*N(A,B)*C*C+2*M(A,B)*C+L(A)}function z(ab,B){for(var C=0;C<Y;++C){var ac=Z(B,G,E);if(ac===0){return B}var A=D(B,G,E)-ab;B-=A/ac}return B}function Q(){for(var A=0;A<W;++A){I[A]=D(A*X,G,E)}}function y(ac,ad,ab){var A,C,B=0;do{C=ad+(ab-ad)/2;A=D(C,G,E)-ac;if(A>0){ab=C}else{ad=C}}while(Math.abs(A)>R&&++B<T);return C}function U(ac){var ad=0,ab=1,A=W-1;for(;ab!=A&&I[ab]<=ac;++ab){ad+=X}--ab;var ae=(ac-I[ab])/(I[ab+1]-I[ab]),C=ad+ae*X,B=Z(C,G,E);if(B>=F){return z(ac,C)}else{if(B==0){return C}else{return y(ac,ad,ad+X)}}}var O=false;function H(){O=true;if(G!=K||E!=J){Q()}}var V=function(A){if(!O){H()}if(G===K&&E===J){return A}if(A===0){return 0}if(A===1){return 1}return D(U(A),K,J)};V.getControlPoints=function(){return[{x:G,y:K},{x:E,y:J}]};var P="generateBezier("+[G,K,E,J]+")";V.toString=function(){return P};return V}var s=(function(){function A(C){return(-C.tension*C.x)-(C.friction*C.v)}function y(D,E,C){var F={x:D.x+C.dx*E,v:D.v+C.dv*E,tension:D.tension,friction:D.friction};return{dx:F.v,dv:A(F)}}function B(H,F){var D={dx:H.v,dv:A(H)},C=y(H,F*0.5,D),J=y(H,F*0.5,C),I=y(H,F,J),G=1/6*(D.dx+2*(C.dx+J.dx)+I.dx),E=1/6*(D.dv+2*(C.dv+J.dv)+I.dv);H.x=H.x+G*F;H.v=H.v+E*F;return H}return function z(J,D,E){var M={x:-1,v:0,tension:null,friction:null},L=[0],F=0,H=1/10000,G=16/1000,I,C,K;J=parseFloat(J)||500;D=parseFloat(D)||20;E=E||null;M.tension=J;M.friction=D;I=E!==null;if(I){F=z(J,D);C=F/E*G}else{C=G}while(true){K=B(K||M,C);L.push(1+K.x);F+=16;if(!(Math.abs(K.x)>H&&Math.abs(K.v)>H)){break}}return !I?F:function(N){return L[(N*(L.length-1))|0]}}}());t.Easings={linear:function(y){return y},swing:function(y){return 0.5-Math.cos(y*Math.PI)/2},spring:function(y){return 1-(Math.cos(y*4.5*Math.PI)*Math.exp(-y*6))}};c.each([["ease",[0.25,0.1,0.25,1]],["ease-in",[0.42,0,1,1]],["ease-out",[0,0,0.58,1]],["ease-in-out",[0.42,0,0.58,1]],["easeInSine",[0.47,0,0.745,0.715]],["easeOutSine",[0.39,0.575,0.565,1]],["easeInOutSine",[0.445,0.05,0.55,0.95]],["easeInQuad",[0.55,0.085,0.68,0.53]],["easeOutQuad",[0.25,0.46,0.45,0.94]],["easeInOutQuad",[0.455,0.03,0.515,0.955]],["easeInCubic",[0.55,0.055,0.675,0.19]],["easeOutCubic",[0.215,0.61,0.355,1]],["easeInOutCubic",[0.645,0.045,0.355,1]],["easeInQuart",[0.895,0.03,0.685,0.22]],["easeOutQuart",[0.165,0.84,0.44,1]],["easeInOutQuart",[0.77,0,0.175,1]],["easeInQuint",[0.755,0.05,0.855,0.06]],["easeOutQuint",[0.23,1,0.32,1]],["easeInOutQuint",[0.86,0,0.07,1]],["easeInExpo",[0.95,0.05,0.795,0.035]],["easeOutExpo",[0.19,1,0.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[0.6,0.04,0.98,0.335]],["easeOutCirc",[0.075,0.82,0.165,1]],["easeInOutCirc",[0.785,0.135,0.15,0.86]]],function(y,z){t.Easings[z[0]]=a.apply(null,z[1])});function n(y,z){var A=y;if(k.isString(y)){if(!t.Easings[y]){A=false}}else{if(k.isArray(y)&&y.length===1){A=l.apply(null,y)}else{if(k.isArray(y)&&y.length===2){A=s.apply(null,y.concat([z]))}else{if(k.isArray(y)&&y.length===4){A=a.apply(null,y)}else{A=false}}}}if(A===false){if(t.Easings[t.defaults.easing]){A=t.defaults.easing}else{A=q}}return A}var m=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/ig},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var B=0;B<m.Lists.colors.length;B++){var A=(m.Lists.colors[B]==="color")?"0 0 0 1":"255 255 255 1";m.Hooks.templates[m.Lists.colors[B]]=["Red Green Blue Alpha",A]}var y,D,F;if(i){for(y in m.Hooks.templates){D=m.Hooks.templates[y];F=D[0].split(" ");var E=D[1].match(m.RegEx.valueSplit);if(F[0]==="Color"){F.push(F.shift());E.push(E.shift());m.Hooks.templates[y]=[F.join(" "),E.join(" ")]}}}for(y in m.Hooks.templates){D=m.Hooks.templates[y];F=D[0].split(" ");for(var B in F){var C=y+F[B],z=B;m.Hooks.registered[C]=[y,z]}}},getRoot:function(y){var z=m.Hooks.registered[y];if(z){return z[0]}else{return y}},cleanRootPropertyValue:function(y,z){if(m.RegEx.valueUnwrap.test(z)){z=z.match(m.RegEx.valueUnwrap)[1]}if(m.Values.isCSSNullValue(z)){z=m.Hooks.templates[y][1]}return z},extractValue:function(B,A){var C=m.Hooks.registered[B];if(C){var z=C[0],y=C[1];A=m.Hooks.cleanRootPropertyValue(z,A);return A.toString().match(m.RegEx.valueSplit)[y]}else{return A}},injectValue:function(C,F,A){var E=m.Hooks.registered[C];if(E){var z=E[0],y=E[1],D,B;A=m.Hooks.cleanRootPropertyValue(z,A);D=A.toString().match(m.RegEx.valueSplit);D[y]=F;B=D.join(" ");return B}else{return A}}},Normalizations:{registered:{clip:function(B,A,z){switch(B){case"name":return"clip";case"extract":var y;if(m.RegEx.wrappedValueAlreadyExtracted.test(z)){y=z}else{y=z.toString().match(m.RegEx.valueUnwrap);y=y?y[1].replace(/,(\s+)?/g," "):z}return y;case"inject":return"rect("+z+")"}},blur:function(B,A,z){switch(B){case"name":return t.State.isFirefox?"filter":"-webkit-filter";case"extract":var y=parseFloat(z);if(!(y||y===0)){var C=z.toString().match(/blur\(([0-9]+[A-z]+)\)/i);if(C){y=C[1]}else{y=0}}return y;case"inject":if(!parseFloat(z)){return"none"}else{return"blur("+z+")"}}},opacity:function(B,A,z){if(i<=8){switch(B){case"name":return"filter";case"extract":var y=z.toString().match(/alpha\(opacity=(.*)\)/i);if(y){z=y[1]/100}else{z=1}return z;case"inject":A.style.zoom=1;if(parseFloat(z)>=1){return""}else{return"alpha(opacity="+parseInt(parseFloat(z)*100,10)+")"}}}else{switch(B){case"name":return"opacity";case"extract":return z;case"inject":return z}}}},register:function(){if(!(i<=9)&&!t.State.isGingerbread){m.Lists.transformsBase=m.Lists.transformsBase.concat(m.Lists.transforms3D)}for(var y=0;y<m.Lists.transformsBase.length;y++){(function(){var z=m.Lists.transformsBase[y];m.Normalizations.registered[z]=function(C,B,A){switch(C){case"name":return"transform";case"extract":if(b(B)===e||b(B).transformCache[z]===e){return/^scale/i.test(z)?1:0}else{return b(B).transformCache[z].replace(/[()]/g,"")}case"inject":var D=false;switch(z.substr(0,z.length-1)){case"translate":D=!/(%|px|em|rem|vw|vh|\d)$/i.test(A);break;case"scal":case"scale":if(t.State.isAndroid&&b(B).transformCache[z]===e&&A<1){A=1}D=!/(\d)$/i.test(A);break;case"skew":D=!/(deg|\d)$/i.test(A);break;case"rotate":D=!/(deg|\d)$/i.test(A);break}if(!D){b(B).transformCache[z]="("+A+")"}return b(B).transformCache[z]}}})()}for(var y=0;y<m.Lists.colors.length;y++){(function(){var z=m.Lists.colors[y];m.Normalizations.registered[z]=function(E,D,B){switch(E){case"name":return z;case"extract":var A;if(m.RegEx.wrappedValueAlreadyExtracted.test(B)){A=B}else{var F,C={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};if(/^[A-z]+$/i.test(B)){if(C[B]!==e){F=C[B]}else{F=C.black}}else{if(m.RegEx.isHex.test(B)){F="rgb("+m.Values.hexToRgb(B).join(" ")+")"}else{if(!(/^rgba?\(/i.test(B))){F=C.black}}}A=(F||B).toString().match(m.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}if(!(i<=8)&&A.split(" ").length===3){A+=" 1"}return A;case"inject":if(i<=8){if(B.split(" ").length===4){B=B.split(/\s+/).slice(0,3).join(" ")}}else{if(B.split(" ").length===3){B+=" 1"}}return(i<=8?"rgb":"rgba")+"("+B.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}})()}}},Names:{camelCase:function(y){return y.replace(/-(\w)/g,function(A,z){return z.toUpperCase()})},SVGAttribute:function(z){var y="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";if(i||(t.State.isAndroid&&!t.State.isChrome)){y+="|transform"}return new RegExp("^("+y+")$","i").test(z)},prefixCheck:function(z){if(t.State.prefixMatches[z]){return[t.State.prefixMatches[z],true]}else{var C=["","Webkit","Moz","ms","O"];for(var y=0,A=C.length;y<A;y++){var B;if(y===0){B=z}else{B=C[y]+z.replace(/^\w/,function(D){return D.toUpperCase()})}if(k.isString(t.State.prefixElement.style[B])){t.State.prefixMatches[z]=B;return[B,true]}}return[z,false]}}},Values:{hexToRgb:function(A){var B=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,z=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,y;A=A.replace(B,function(D,F,E,C){return F+F+E+E+C+C});y=z.exec(A);return y?[parseInt(y[1],16),parseInt(y[2],16),parseInt(y[3],16)]:[0,0,0]},isCSSNullValue:function(y){return(y==0||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(y))},getUnitType:function(y){if(/^(rotate|skew)/i.test(y)){return"deg"}else{if(/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(y)){return""}else{return"px"}}},getDisplayType:function(z){var y=z&&z.tagName.toString().toLowerCase();if(/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(y)){return"inline"}else{if(/^(li)$/i.test(y)){return"list-item"}else{if(/^(tr)$/i.test(y)){return"table-row"}else{if(/^(table)$/i.test(y)){return"table"}else{if(/^(tbody)$/i.test(y)){return"table-row-group"}else{return"block"}}}}}},addClass:function(y,z){if(y.classList){y.classList.add(z)}else{y.className+=(y.className.length?" ":"")+z}},removeClass:function(y,z){if(y.classList){y.classList.remove(z)}else{y.className=y.className.toString().replace(new RegExp("(^|\\s)"+z.split(" ").join("|")+"(\\s|$)","gi")," ")}}},getPropertyValue:function(C,H,F,I){function z(L,Q){var M=0;if(i<=8){M=c.css(L,Q)}else{var P=false;if(/^(width|height)$/.test(Q)&&m.getPropertyValue(L,"display")===0){P=true;m.setPropertyValue(L,"display",m.Values.getDisplayType(L))}function K(){if(P){m.setPropertyValue(L,"display","none")}}if(!I){if(Q==="height"&&m.getPropertyValue(L,"boxSizing").toString().toLowerCase()!=="border-box"){var J=L.offsetHeight-(parseFloat(m.getPropertyValue(L,"borderTopWidth"))||0)-(parseFloat(m.getPropertyValue(L,"borderBottomWidth"))||0)-(parseFloat(m.getPropertyValue(L,"paddingTop"))||0)-(parseFloat(m.getPropertyValue(L,"paddingBottom"))||0);K();return J}else{if(Q==="width"&&m.getPropertyValue(L,"boxSizing").toString().toLowerCase()!=="border-box"){var R=L.offsetWidth-(parseFloat(m.getPropertyValue(L,"borderLeftWidth"))||0)-(parseFloat(m.getPropertyValue(L,"borderRightWidth"))||0)-(parseFloat(m.getPropertyValue(L,"paddingLeft"))||0)-(parseFloat(m.getPropertyValue(L,"paddingRight"))||0);K();return R}}}var O;if(b(L)===e){O=h.getComputedStyle(L,null)}else{if(!b(L).computedStyle){O=b(L).computedStyle=h.getComputedStyle(L,null)}else{O=b(L).computedStyle}}if(Q==="borderColor"){Q="borderTopColor"}if(i===9&&Q==="filter"){M=O.getPropertyValue(Q)}else{M=O[Q]}if(M===""||M===null){M=L.style[Q]}K()}if(M==="auto"&&/^(top|right|bottom|left)$/i.test(Q)){var N=z(L,"position");if(N==="fixed"||(N==="absolute"&&/top|left/i.test(Q))){M=c(L).position()[Q]+"px"}}return M}var B;if(m.Hooks.registered[H]){var E=H,A=m.Hooks.getRoot(E);if(F===e){F=m.getPropertyValue(C,m.Names.prefixCheck(A)[0])}if(m.Normalizations.registered[A]){F=m.Normalizations.registered[A]("extract",C,F)}B=m.Hooks.extractValue(E,F)}else{if(m.Normalizations.registered[H]){var G,y;G=m.Normalizations.registered[H]("name",C);if(G!=="transform"){y=z(C,m.Names.prefixCheck(G)[0]);if(m.Values.isCSSNullValue(y)&&m.Hooks.templates[H]){y=m.Hooks.templates[H][1]}}B=m.Normalizations.registered[H]("extract",C,y)}}if(!/^[\d-]/.test(B)){if(b(C)&&b(C).isSVG&&m.Names.SVGAttribute(H)){if(/^(height|width)$/i.test(H)){try{B=C.getBBox()[H]}catch(D){B=0}}else{B=C.getAttribute(H)}}else{B=z(C,m.Names.prefixCheck(H)[0])}}if(m.Values.isCSSNullValue(B)){B=0}if(t.debug>=2){console.log("Get "+H+": "+B)}return B},setPropertyValue:function(A,G,z,F,B){var C=G;if(G==="scroll"){if(B.container){B.container["scroll"+B.direction]=z}else{if(B.direction==="Left"){h.scrollTo(z,B.alternateValue)}else{h.scrollTo(B.alternateValue,z)}}}else{if(m.Normalizations.registered[G]&&m.Normalizations.registered[G]("name",A)==="transform"){m.Normalizations.registered[G]("inject",A,z);C="transform";z=b(A).transformCache[G]}else{if(m.Hooks.registered[G]){var D=G,y=m.Hooks.getRoot(G);F=F||m.getPropertyValue(A,y);z=m.Hooks.injectValue(D,z,F);G=y}if(m.Normalizations.registered[G]){z=m.Normalizations.registered[G]("inject",A,z);G=m.Normalizations.registered[G]("name",A)}C=m.Names.prefixCheck(G)[0];if(i<=8){try{A.style[C]=z}catch(E){if(t.debug){console.log("Browser does not support ["+z+"] for ["+C+"]")}}}else{if(b(A)&&b(A).isSVG&&m.Names.SVGAttribute(G)){A.setAttribute(G,z)}else{A.style[C]=z}}if(t.debug>=2){console.log("Set "+G+" ("+C+"): "+z)}}}return[C,z]},flushTransformCache:function(A){var z="";if((i||(t.State.isAndroid&&!t.State.isChrome))&&b(A).isSVG){function y(E){return parseFloat(m.getPropertyValue(A,E))}var B={translate:[y("translateX"),y("translateY")],skewX:[y("skewX")],skewY:[y("skewY")],scale:y("scale")!==1?[y("scale"),y("scale")]:[y("scaleX"),y("scaleY")],rotate:[y("rotateZ"),0,0]};c.each(b(A).transformCache,function(E){if(/^translate/i.test(E)){E="translate"}else{if(/^scale/i.test(E)){E="scale"}else{if(/^rotate/i.test(E)){E="rotate"}}}if(B[E]){z+=E+"("+B[E].join(" ")+") ";delete B[E]}})}else{var D,C;c.each(b(A).transformCache,function(E){D=b(A).transformCache[E];if(E==="transformPerspective"){C=D;return true}if(i===9&&E==="rotateZ"){E="rotate"}z+=E+D+" "});if(C){z="perspective"+C+" "+z}}m.setPropertyValue(A,"transform",z)}};m.Hooks.register();m.Normalizations.register();t.hook=function(B,z,y){var A=e;B=g(B);c.each(B,function(D,C){if(b(C)===e){t.init(C)}if(y===e){if(A===e){A=t.CSS.getPropertyValue(C,z)}}else{var E=t.CSS.setPropertyValue(C,z,y);if(E[0]==="transform"){t.CSS.flushTransformCache(C)}A=E}});return A};var d=function(){function A(){if(J){return Q.promise||null}else{return y}}var G=(arguments[0]&&(arguments[0].p||((c.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names)||k.isString(arguments[0].properties)))),J,y,z;var H,K,C;if(k.isWrapped(this)){J=false;z=0;H=this;y=this}else{J=true;z=1;H=G?(arguments[0].elements||arguments[0].e):arguments[0]}H=g(H);if(!H){return}if(G){K=arguments[0].properties||arguments[0].p;C=arguments[0].options||arguments[0].o}else{K=arguments[z];C=arguments[z+1]}var W=H.length,O=0;if(!/^(stop|finish|finishAll)$/i.test(K)&&!c.isPlainObject(C)){var B=z+1;C={};for(var N=B;N<arguments.length;N++){if(!k.isArray(arguments[N])&&(/^(fast|normal|slow)$/i.test(arguments[N])||/^\d/.test(arguments[N]))){C.duration=arguments[N]}else{if(k.isString(arguments[N])||k.isArray(arguments[N])){C.easing=arguments[N]}else{if(k.isFunction(arguments[N])){C.complete=arguments[N]}}}}}var Q={promise:null,resolver:null,rejecter:null};if(J&&t.Promise){Q.promise=new t.Promise(function(Y,X){Q.resolver=Y;Q.rejecter=X})}var M;switch(K){case"scroll":M="scroll";break;case"reverse":M="reverse";break;case"finish":case"finishAll":case"stop":c.each(H,function(Y,X){if(b(X)&&b(X).delayTimer){clearTimeout(b(X).delayTimer.setTimeout);if(b(X).delayTimer.next){b(X).delayTimer.next()}delete b(X).delayTimer}if(K==="finishAll"&&(C===true||k.isString(C))){c.each(c.queue(X,k.isString(C)?C:""),function(Z,aa){if(k.isFunction(aa)){aa()}});c.queue(X,k.isString(C)?C:"",[])}});var D=[];c.each(t.State.calls,function(X,Y){if(Y){c.each(Y[1],function(Z,aa){var ab=(C===e)?"":C;if(ab!==true&&(Y[2].queue!==ab)&&!(C===e&&Y[2].queue===false)){return true}c.each(H,function(ac,ad){if(ad===aa){if(C===true||k.isString(C)){c.each(c.queue(ad,k.isString(C)?C:""),function(ae,af){if(k.isFunction(af)){af(null,true)}});c.queue(ad,k.isString(C)?C:"",[])}if(K==="stop"){if(b(ad)&&b(ad).tweensContainer&&ab!==false){c.each(b(ad).tweensContainer,function(ae,af){af.endValue=af.currentValue})}D.push(X)}else{if(K==="finish"||K==="finishAll"){Y[2].duration=1}}}})})}});if(K==="stop"){c.each(D,function(Y,X){u(X,true)});if(Q.promise){Q.resolver(H)}}return A();default:if(c.isPlainObject(K)&&!k.isEmptyObject(K)){M="start"}else{if(k.isString(K)&&t.Redirects[K]){var I=c.extend({},C),E=I.duration,V=I.delay||0;if(I.backwards===true){H=c.extend(true,[],H).reverse()}c.each(H,function(Y,X){if(parseFloat(I.stagger)){I.delay=V+(parseFloat(I.stagger)*Y)}else{if(k.isFunction(I.stagger)){I.delay=V+I.stagger.call(X,Y,W)}}if(I.drag){I.duration=parseFloat(E)||(/^(callout|transition)/.test(K)?1000:f);I.duration=Math.max(I.duration*(I.backwards?1-Y/W:(Y+1)/W),I.duration*0.75,200)}t.Redirects[K].call(X,X,I||{},Y,W,H,Q.promise?Q:e)});return A()}else{var L="Velocity: First argument ("+K+") was not a property map, a known action, or a registered redirect. Aborting.";if(Q.promise){Q.rejecter(new Error(L))}else{console.log(L)}return A()}}}var S={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null};var R=[];function P(){var X=this,aa=c.extend({},t.defaults,C),Z={},Y;if(b(X)===e){t.init(X)}if(parseFloat(aa.delay)&&aa.queue!==false){c.queue(X,aa.queue,function(ac){t.velocityQueueEntryFlag=true;b(X).delayTimer={setTimeout:setTimeout(ac,parseFloat(aa.delay)),next:ac}})}switch(aa.duration.toString().toLowerCase()){case"fast":aa.duration=200;break;case"normal":aa.duration=f;break;case"slow":aa.duration=600;break;default:aa.duration=parseFloat(aa.duration)||1}if(t.mock!==false){if(t.mock===true){aa.duration=aa.delay=1}else{aa.duration*=parseFloat(t.mock)||1;aa.delay*=parseFloat(t.mock)||1}}aa.easing=n(aa.easing,aa.duration);if(aa.begin&&!k.isFunction(aa.begin)){aa.begin=null}if(aa.progress&&!k.isFunction(aa.progress)){aa.progress=null}if(aa.complete&&!k.isFunction(aa.complete)){aa.complete=null}if(aa.display!==e&&aa.display!==null){aa.display=aa.display.toString().toLowerCase();if(aa.display==="auto"){aa.display=t.CSS.Values.getDisplayType(X)}}if(aa.visibility!==e&&aa.visibility!==null){aa.visibility=aa.visibility.toString().toLowerCase()}aa.mobileHA=(aa.mobileHA&&t.State.isMobile&&!t.State.isGingerbread);function ab(aq){if(aa.begin&&O===0){try{aa.begin.call(H,H)}catch(ax){setTimeout(function(){throw ax},1)}}if(M==="scroll"){var ar=(/^x$/i.test(aa.axis)?"Left":"Top"),ao=parseFloat(aa.offset)||0,ae,aA,ay;if(aa.container){if(k.isWrapped(aa.container)||k.isNode(aa.container)){aa.container=aa.container[0]||aa.container;ae=aa.container["scroll"+ar];ay=(ae+c(X).position()[ar.toLowerCase()])+ao}else{aa.container=null}}else{ae=t.State.scrollAnchor[t.State["scrollProperty"+ar]];aA=t.State.scrollAnchor[t.State["scrollProperty"+(ar==="Left"?"Top":"Left")]];ay=c(X).offset()[ar.toLowerCase()]+ao}Z={scroll:{rootPropertyValue:false,startValue:ae,currentValue:ae,endValue:ay,unitType:"",easing:aa.easing,scrollData:{container:aa.container,direction:ar,alternateValue:aA}},element:X};if(t.debug){console.log("tweensContainer (scroll): ",Z.scroll,X)}}else{if(M==="reverse"){if(!b(X).tweensContainer){c.dequeue(X,aa.queue);return}else{if(b(X).opts.display==="none"){b(X).opts.display="auto"}if(b(X).opts.visibility==="hidden"){b(X).opts.visibility="visible"}b(X).opts.loop=false;b(X).opts.begin=null;b(X).opts.complete=null;if(!C.easing){delete aa.easing}if(!C.duration){delete aa.duration}aa=c.extend({},b(X).opts,aa);var au=c.extend(true,{},b(X).tweensContainer);for(var aw in au){if(aw!=="element"){var aj=au[aw].startValue;au[aw].startValue=au[aw].currentValue=au[aw].endValue;au[aw].endValue=aj;if(!k.isEmptyObject(C)){au[aw].easing=aa.easing}if(t.debug){console.log("reverse tweensContainer ("+aw+"): "+JSON.stringify(au[aw]),X)}}}Z=au}}else{if(M==="start"){var au;if(b(X).tweensContainer&&b(X).isAnimating===true){au=b(X).tweensContainer}function am(aE,aD){var aC=e,aG=e,aF=e;if(k.isArray(aE)){aC=aE[0];if((!k.isArray(aE[1])&&/^[\d-]/.test(aE[1]))||k.isFunction(aE[1])||m.RegEx.isHex.test(aE[1])){aF=aE[1]}else{if((k.isString(aE[1])&&!m.RegEx.isHex.test(aE[1]))||k.isArray(aE[1])){aG=aD?aE[1]:n(aE[1],aa.duration);if(aE[2]!==e){aF=aE[2]}}}}else{aC=aE}if(!aD){aG=aG||aa.easing}if(k.isFunction(aC)){aC=aC.call(X,O,W)}if(k.isFunction(aF)){aF=aF.call(X,O,W)}return[aC||0,aG,aF]}c.each(K,function(aM,aL){if(RegExp("^"+m.Lists.colors.join("$|^")+"$").test(aM)){var aE=am(aL,true),aJ=aE[0],aI=aE[1],aF=aE[2];if(m.RegEx.isHex.test(aJ)){var aC=["Red","Green","Blue"],aD=m.Values.hexToRgb(aJ),aG=aF?m.Values.hexToRgb(aF):e;for(var aH=0;aH<aC.length;aH++){var aK=[aD[aH]];if(aI){aK.push(aI)}if(aG!==e){aK.push(aG[aH])}K[aM+aC[aH]]=aK}delete K[aM]}}});for(var ah in K){var at=am(K[ah]),an=at[0],av=at[1],ap=at[2];ah=m.Names.camelCase(ah);var al=m.Hooks.getRoot(ah),ag=false;if(!b(X).isSVG&&al!=="tween"&&m.Names.prefixCheck(al)[1]===false&&m.Normalizations.registered[al]===e){if(t.debug){console.log("Skipping ["+al+"] due to a lack of browser support.")}continue}if(((aa.display!==e&&aa.display!==null&&aa.display!=="none")||(aa.visibility!==e&&aa.visibility!=="hidden"))&&/opacity|filter/.test(ah)&&!ap&&an!==0){ap=0}if(aa._cacheValues&&au&&au[ah]){if(ap===e){ap=au[ah].endValue+au[ah].unitType}ag=b(X).rootPropertyValueCache[al]}else{if(m.Hooks.registered[ah]){if(ap===e){ag=m.getPropertyValue(X,al);ap=m.getPropertyValue(X,ah,ag)}else{ag=m.Hooks.templates[al][1]}}else{if(ap===e){ap=m.getPropertyValue(X,ah)}}}var aB,az,ai,ak=false;function ac(aE,aD){var aC,aF;aF=(aD||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(aG){aC=aG;return""});if(!aC){aC=m.Values.getUnitType(aE)}return[aF,aC]}aB=ac(ah,ap);ap=aB[0];ai=aB[1];aB=ac(ah,an);an=aB[0].replace(/^([+-\/*])=/,function(aD,aC){ak=aC;return""});az=aB[1];ap=parseFloat(ap)||0;an=parseFloat(an)||0;if(az==="%"){if(/^(fontSize|lineHeight)$/.test(ah)){an=an/100;az="em"}else{if(/^scale/.test(ah)){an=an/100;az=""}else{if(/(Red|Green|Blue)$/i.test(ah)){an=(an/100)*255;az=""}}}}function af(){var aD={myParent:X.parentNode||o.body,position:m.getPropertyValue(X,"position"),fontSize:m.getPropertyValue(X,"fontSize")},aC=((aD.position===S.lastPosition)&&(aD.myParent===S.lastParent)),aH=(aD.fontSize===S.lastFontSize);S.lastParent=aD.myParent;S.lastPosition=aD.position;S.lastFontSize=aD.fontSize;var aE=100,aF={};if(!aH||!aC){var aG=b(X).isSVG?o.createElementNS("http://www.w3.org/2000/svg","rect"):o.createElement("div");t.init(aG);aD.myParent.appendChild(aG);c.each(["overflow","overflowX","overflowY"],function(aI,aJ){t.CSS.setPropertyValue(aG,aJ,"hidden")});t.CSS.setPropertyValue(aG,"position",aD.position);t.CSS.setPropertyValue(aG,"fontSize",aD.fontSize);t.CSS.setPropertyValue(aG,"boxSizing","content-box");c.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(aI,aJ){t.CSS.setPropertyValue(aG,aJ,aE+"%")});t.CSS.setPropertyValue(aG,"paddingLeft",aE+"em");aF.percentToPxWidth=S.lastPercentToPxWidth=(parseFloat(m.getPropertyValue(aG,"width",null,true))||1)/aE;aF.percentToPxHeight=S.lastPercentToPxHeight=(parseFloat(m.getPropertyValue(aG,"height",null,true))||1)/aE;aF.emToPx=S.lastEmToPx=(parseFloat(m.getPropertyValue(aG,"paddingLeft"))||1)/aE;aD.myParent.removeChild(aG)}else{aF.emToPx=S.lastEmToPx;aF.percentToPxWidth=S.lastPercentToPxWidth;aF.percentToPxHeight=S.lastPercentToPxHeight}if(S.remToPx===null){S.remToPx=parseFloat(m.getPropertyValue(o.body,"fontSize"))||16}if(S.vwToPx===null){S.vwToPx=parseFloat(h.innerWidth)/100;S.vhToPx=parseFloat(h.innerHeight)/100}aF.remToPx=S.remToPx;aF.vwToPx=S.vwToPx;aF.vhToPx=S.vhToPx;if(t.debug>=1){console.log("Unit ratios: "+JSON.stringify(aF),X)}return aF}if(/[\/*]/.test(ak)){az=ai}else{if((ai!==az)&&ap!==0){if(an===0){az=ai}else{Y=Y||af();var ad=(/margin|padding|left|right|width|text|word|letter/i.test(ah)||/X$/.test(ah)||ah==="x")?"x":"y";switch(ai){case"%":ap*=(ad==="x"?Y.percentToPxWidth:Y.percentToPxHeight);break;case"px":break;default:ap*=Y[ai+"ToPx"]}switch(az){case"%":ap*=1/(ad==="x"?Y.percentToPxWidth:Y.percentToPxHeight);break;case"px":break;default:ap*=1/Y[az+"ToPx"]}}}}switch(ak){case"+":an=ap+an;break;case"-":an=ap-an;break;case"*":an=ap*an;break;case"/":an=ap/an;break}Z[ah]={rootPropertyValue:ag,startValue:ap,currentValue:ap,endValue:an,unitType:az,easing:av};if(t.debug){console.log("tweensContainer ("+ah+"): "+JSON.stringify(Z[ah]),X)}}Z.element=X}}}if(Z.element){m.Values.addClass(X,"velocity-animating");R.push(Z);if(aa.queue===""){b(X).tweensContainer=Z;b(X).opts=aa}b(X).isAnimating=true;if(O===W-1){t.State.calls.push([R,H,aa,null,Q.resolver]);if(t.State.isTicking===false){t.State.isTicking=true;r()}}else{O++}}}if(aa.queue===false){if(aa.delay){setTimeout(ab,aa.delay)}else{ab()}}else{c.queue(X,aa.queue,function(ad,ac){if(ac===true){if(Q.promise){Q.resolver(H)}return true}t.velocityQueueEntryFlag=true;ab(ad)})}if((aa.queue===""||aa.queue==="fx")&&c.queue(X)[0]!=="inprogress"){c.dequeue(X)}}c.each(H,function(Y,X){if(k.isNode(X)){P.call(X)}});var I=c.extend({},t.defaults,C),T;I.loop=parseInt(I.loop);T=(I.loop*2)-1;if(I.loop){for(var F=0;F<T;F++){var U={delay:I.delay,progress:I.progress};if(F===T-1){U.display=I.display;U.visibility=I.visibility;U.complete=I.complete}d(H,"reverse",U)}}return A()};t=c.extend(d,t);t.animate=d;var v=h.requestAnimationFrame||j;if(!t.State.isMobile&&o.hidden!==e){o.addEventListener("visibilitychange",function(){if(o.hidden){v=function(y){return setTimeout(function(){y(true)},16)};r()}else{v=h.requestAnimationFrame||j}})}function r(z){if(z){var P=(new Date).getTime();var U=t.State.calls.length;if(U>10000){t.State.calls=w(t.State.calls)}for(var Q=0;Q<U;Q++){if(!t.State.calls[Q]){continue}var E=t.State.calls[Q],T=E[0],J=E[2],W=E[3],S=!!W,A=null;if(!W){W=t.State.calls[Q][3]=P-16}var R=Math.min((P-W)/J.duration,1);for(var N=0,C=T.length;N<C;N++){var L=T[N],y=L.element;if(!b(y)){continue}var K=false;if(J.display!==e&&J.display!==null&&J.display!=="none"){if(J.display==="flex"){var G=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];c.each(G,function(X,Y){m.setPropertyValue(y,"display",Y)})}m.setPropertyValue(y,"display",J.display)}if(J.visibility!==e&&J.visibility!=="hidden"){m.setPropertyValue(y,"visibility",J.visibility)}for(var D in L){if(D!=="element"){var B=L[D],H,M=k.isString(B.easing)?t.Easings[B.easing]:B.easing;if(R===1){H=B.endValue}else{var O=B.endValue-B.startValue;H=B.startValue+(O*M(R,J,O));if(!S&&(H===B.currentValue)){continue}}B.currentValue=H;if(D==="tween"){A=H}else{if(m.Hooks.registered[D]){var F=m.Hooks.getRoot(D),I=b(y).rootPropertyValueCache[F];if(I){B.rootPropertyValue=I}}var V=m.setPropertyValue(y,D,B.currentValue+(parseFloat(H)===0?"":B.unitType),B.rootPropertyValue,B.scrollData);if(m.Hooks.registered[D]){if(m.Normalizations.registered[F]){b(y).rootPropertyValueCache[F]=m.Normalizations.registered[F]("extract",null,V[1])}else{b(y).rootPropertyValueCache[F]=V[1]}}if(V[0]==="transform"){K=true}}}}if(J.mobileHA){if(b(y).transformCache.translate3d===e){b(y).transformCache.translate3d="(0px, 0px, 0px)";K=true}}if(K){m.flushTransformCache(y)}}if(J.display!==e&&J.display!=="none"){t.State.calls[Q][2].display=false}if(J.visibility!==e&&J.visibility!=="hidden"){t.State.calls[Q][2].visibility=false}if(J.progress){J.progress.call(E[1],E[1],R,Math.max(0,(W+J.duration)-P),W,A)}if(R===1){u(Q)}}}if(t.State.isTicking){v(r)}}function u(H,C){if(!t.State.calls[H]){return false}var L=t.State.calls[H][0],y=t.State.calls[H][1],z=t.State.calls[H][2],B=t.State.calls[H][4];var I=false;for(var F=0,A=L.length;F<A;F++){var E=L[F].element;if(!C&&!z.loop){if(z.display==="none"){m.setPropertyValue(E,"display",z.display)}if(z.visibility==="hidden"){m.setPropertyValue(E,"visibility",z.visibility)}}if(z.loop!==true&&(c.queue(E)[1]===e||!/\.velocityQueueEntryFlag/i.test(c.queue(E)[1]))){if(b(E)){b(E).isAnimating=false;b(E).rootPropertyValueCache={};var G=false;c.each(m.Lists.transforms3D,function(O,N){var M=/^scale/.test(N)?1:0,P=b(E).transformCache[N];if(b(E).transformCache[N]!==e&&new RegExp("^\\("+M+"[^.]").test(P)){G=true;delete b(E).transformCache[N]}});if(z.mobileHA){G=true;delete b(E).transformCache.translate3d}if(G){m.flushTransformCache(E)}m.Values.removeClass(E,"velocity-animating")}}if(!C&&z.complete&&!z.loop&&(F===A-1)){try{z.complete.call(y,y)}catch(J){setTimeout(function(){throw J},1)}}if(B&&z.loop!==true){B(y)}if(b(E)&&z.loop===true&&!C){c.each(b(E).tweensContainer,function(M,N){if(/^rotate/.test(M)&&parseFloat(N.endValue)===360){N.endValue=0;N.startValue=360}if(/^backgroundPosition/.test(M)&&parseFloat(N.endValue)===100&&N.unitType==="%"){N.endValue=0;N.startValue=100}});t(E,"reverse",{loop:true,delay:z.delay})}if(z.queue!==false){c.dequeue(E,z.queue)}}t.State.calls[H]=false;for(var D=0,K=t.State.calls.length;D<K;D++){if(t.State.calls[D]!==false){I=true;break}}if(I===false){t.State.isTicking=false;delete t.State.calls;t.State.calls=[]}}p.Velocity=t;if(p!==h){p.fn.velocity=d;p.fn.velocity.defaults=t.defaults}c.each(["Down","Up"],function(y,z){t.Redirects["slide"+z]=function(J,K,C,H,A,G){var B=c.extend({},K),I=B.begin,F=B.complete,E={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},D={};if(B.display===e){B.display=(z==="Down"?(t.CSS.Values.getDisplayType(J)==="inline"?"inline-block":"block"):"none")}B.begin=function(){I&&I.call(A,A);for(var M in E){D[M]=J.style[M];var L=t.CSS.getPropertyValue(J,M);E[M]=(z==="Down")?[L,0]:[0,L]}D.overflow=J.style.overflow;J.style.overflow="hidden"};B.complete=function(){for(var L in D){J.style[L]=D[L]}F&&F.call(A,A);G&&G.resolver(A)};t(J,E,B)}});c.each(["In","Out"],function(y,z){t.Redirects["fade"+z]=function(H,I,C,E,A,D){var B=c.extend({},I),F={opacity:(z==="In")?1:0},G=B.complete;if(C!==E-1){B.complete=B.begin=null}else{B.complete=function(){if(G){G.call(A,A)}D&&D.resolver(A)}}if(B.display===e){B.display=(z==="In"?"auto":"none")}t(this,F,B)}});return t}((window.jQuery||window.Zepto||window),window,document)}));(function(a,b){if(typeof define==="function"){define(["jquery"],b)}else{if(typeof exports==="object"){module.exports=b()}else{a.phone=b(a.jQuery,a.Box)}}}(this,function(){var b,a,c;(function(h){var k,d,o,p,g={},f={},v={},s={},n=Object.prototype.hasOwnProperty,l=[].slice,m=/\.js$/;function w(x,y){return n.call(x,y)}function q(A,y){var I,E,C,F,J,B,L,M,H,G,D,K=y&&y.split("/"),z=v.map,x=(z&&z["*"])||{};if(A&&A.charAt(0)==="."){if(y){A=A.split("/");J=A.length-1;if(v.nodeIdCompat&&m.test(A[J])){A[J]=A[J].replace(m,"")}A=K.slice(0,K.length-1).concat(A);for(H=0;H<A.length;H+=1){D=A[H];if(D==="."){A.splice(H,1);H-=1}else{if(D===".."){if(H===1&&(A[2]===".."||A[0]==="..")){break}else{if(H>0){A.splice(H-1,2);H-=2}}}}}A=A.join("/")}else{if(A.indexOf("./")===0){A=A.substring(2)}}}if((K||x)&&z){I=A.split("/");for(H=I.length;H>0;H-=1){E=I.slice(0,H).join("/");if(K){for(G=K.length;G>0;G-=1){C=z[K.slice(0,G).join("/")];if(C){C=C[E];if(C){F=C;B=H;break}}}}if(F){break}if(!L&&x&&x[E]){L=x[E];M=H}}if(!F&&L){F=L;B=M}if(F){I.splice(0,B,F);A=I.join("/")}}return A}function u(x,y){return function(){var z=l.call(arguments,0);if(typeof z[0]!=="string"&&z.length===1){z.push(null)}return d.apply(h,z.concat([x,y]))}}function r(x){return function(y){return q(y,x)}}function i(x){return function(y){g[x]=y}}function j(y){if(w(f,y)){var x=f[y];delete f[y];s[y]=true;k.apply(h,x)}if(!w(g,y)&&!w(s,y)){throw new Error("No "+y)}return g[y]}function t(y){var z,x=y?y.indexOf("!"):-1;if(x>-1){z=y.substring(0,x);y=y.substring(x+1,y.length)}return[z,y]}o=function(y,x){var z,B=t(y),A=B[0];y=B[1];if(A){A=q(A,x);z=j(A)}if(A){if(z&&z.normalize){y=z.normalize(y,r(x))}else{y=q(y,x)}}else{y=q(y,x);B=t(y);A=B[0];y=B[1];if(A){z=j(A)}}return{f:A?A+"!"+y:y,n:y,pr:A,p:z}};function e(x){return function(){return(v&&v.config&&v.config[x])||{}}}p={require:function(x){return u(x)},exports:function(x){var y=g[x];if(typeof y!=="undefined"){return y}else{return(g[x]={})}},module:function(x){return{id:x,uri:"",exports:g[x],config:e(x)}}};k=function(y,I,H,G){var B,F,C,x,A,D=[],z=typeof H,E;G=G||y;if(z==="undefined"||z==="function"){I=!I.length&&H.length?["require","exports","module"]:I;for(A=0;A<I.length;A+=1){x=o(I[A],G);F=x.f;if(F==="require"){D[A]=p.require(y)}else{if(F==="exports"){D[A]=p.exports(y);E=true}else{if(F==="module"){B=D[A]=p.module(y)}else{if(w(g,F)||w(f,F)||w(s,F)){D[A]=j(F)}else{if(x.p){x.p.load(x.n,u(G,true),i(F),{});D[A]=g[F]}else{throw new Error(y+" missing "+F)}}}}}}C=H?H.apply(g[y],D):undefined;if(y){if(B&&B.exports!==h&&B.exports!==g[y]){g[y]=B.exports}else{if(C!==h||!E){g[y]=C}}}}else{if(y){g[y]=H}}};b=a=d=function(A,B,x,y,z){if(typeof A==="string"){if(p[A]){return p[A](B)}return j(o(A,B).f)}else{if(!A.splice){v=A;if(v.deps){d(v.deps,v.callback)}if(!B){return}if(B.splice){A=B;B=x;x=null}else{A=h}}}B=B||function(){};if(typeof x==="function"){x=y;y=z}if(y){k(h,A,B,x)}else{setTimeout(function(){k(h,A,B,x)},4)}return d};d.config=function(x){return d(x)};b._defined=g;c=function(x,y,z){if(typeof x!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!y.splice){z=y;y=[]}if(!w(g,x)&&!w(f,x)){f[x]=[x,y,z]}};c.amd={jQuery:true}}());c("../tools/almond.js",function(){});c("services/EventTarget",["require"],function(d){function e(){this._handlers={}}e.prototype={constructor:e,on:function(k,j){var g=this._handlers[k],h,f;if(typeof g==="undefined"){g=this._handlers[k]=[]}for(h=0,f=g.length;h<f;h++){if(g[h]===j){return}}g.push(j)},fire:function(j,l){var g,h,f,k={type:j,data:l};g=this._handlers[k.type];if(g instanceof Array){g=g.concat();for(h=0,f=g.length;h<f;h++){g[h].call(this,k)}}},off:function(k,j){var g=this._handlers[k],h,f;if(g instanceof Array){for(h=0,f=g.length;h<f;h++){if(g[h]===j){g.splice(h,1);break}}}}};return e});c("services/DOMEventDelegate",["require","jquery"],function(h){var j=h("jquery");var k=["click","mouseover","mouseout","mousedown","mouseup","mouseenter","mouseleave","mousemove","keydown","keyup","submit","change","contextmenu","dblclick","input","focusin","focusout"];function g(l){return l&&l.hasAttribute("data-module")}function f(l){return l&&l.hasAttribute("data-type")}function e(l){var m=f(l);while(!m&&l&&!g(l)){l=l.parentNode;m=f(l)}return m?l:null}function i(o,p,l){var m,n;for(m=0;m<k.length;m++){n=k[m];if(o["on"+n]){p.call(l,n)}}}function d(l,m){this.element=l;this._handler=m;this._boundHandler={};this._attached=false}d.prototype={constructor:d,_handleEvent:function(n){var m=e(n.target),l=m?m.getAttribute("data-type"):"";this._handler["on"+n.type](n,m,l)},attachEvents:function(){if(!this._attached){i(this._handler,function(m){var n=this;function l(){n._handleEvent.apply(n,arguments)}j(this.element).on(m,l);this._boundHandler[m]=l},this);this._attached=true}},detachEvents:function(){i(this._handler,function(l){j(this.element).off(l,this._boundHandler[l])},this)}};return d});c("behaviors/Phone",["require","jquery","../services/DOMEventDelegate"],function(e){var g=e("jquery");var d=e("../services/DOMEventDelegate");function f(h){this.phoneDB=h.phoneDB;this.$moduleEl=h.$moduleEl;this.moduleEl=h.$moduleEl[0];this.events=h.events;this.domEventDelegate=new d(this.moduleEl,this.getHandlers());this.domEventDelegate.attachEvents();return this}f.prototype={constructor:f,getClosestElement:function(h,i){while(h){if(this.$moduleEl.find(i).index(h)>-1){return h}else{h=h.parentNode}}return false},getHandlers:function(){var h=this;return{onclick:function(n,j,i){switch(i){case"getcode":if(h.phoneDB.getOption("isInWaiting")){return}var m=h.$moduleEl.find('.js-group-number input[type="text"]').val();var l=h.phoneDB.checkNumber(m);h.events.fire("getcode",l);break;case"submit":var m=h.$moduleEl.find('.js-group-number input[type="text"]').val();var k=h.$moduleEl.find('.js-group-checkCode input[type="text"]').val();var l=h.phoneDB.check(m,k);h.events.fire("check",l);break;case"changenumber":h.events.fire("changenumber");break;case"cancel":h.events.fire("bhcancel");break}}}},destroy:function(){this.domEventDelegate.detachEvents()}};return f});c("services/Phone",["require","jquery"],function(e){var g=e("jquery");var d={needCreateDom:true,hasLabel:false,hasCancelButton:false,hasStep:false,isStepType2:false,isStepType3:false,isAuto:false,step:1,isInline:false,url:"/a/mobile/vcode/",submitUrl:"/r/activity/signup/",number:"",numberText:"手机号",numberPlaceHolder:"请输入手机号",checkCodeText:"验证码",checkCodePlaceHolder:"请输入验证码",getCodeText:"获取验证码",isInWaiting:false,waitCheckCodeTpl:"<span>${waitSeconds}</span>秒后重发",checkNumberText:"索取",submitText:"确定",cancelText:"关闭",changeNumberText:"换一个号码",waitSeconds:60,numberReg:"^1[3|4|5|7|8]\\d{9}$",requiredMsg:"不能为空",regexpMsg:"格式不正确",showError:"inline",errorIconClasses:"icon-phone-error",btnGetCodeUpClasses:"",btnGetCodeDownClasses:"",btnSubmitClasses:"",btnCancelClasses:"",getCodeData:{},submitData:{},getCodeAjaxType:"get",signupAjaxType:"post",signupDataType:"json",msgConfig:{},isSubmit:true,toLog:false};function f(){}f.prototype={constructor:f,setOptions:function(h){h=h||{};g.extend(this,d,h)},setOption:function(h,i){if(typeof i==="undefined"){return}this[h]=i},getOption:function(h){return this[h]},requiredCheck:function(j,i){var h="";if(g.trim(i)===""){h=this[j+"Text"]+this.requiredMsg}return{field:j,errorMsg:h}},regexpCheck:function(l,k){var i="";var h=this[l+"Reg"];var j=new RegExp(h);if(!j.test(k)){i=this[l+"Text"]+this.regexpMsg}return{field:l,errorMsg:i}},checkNumber:function(i){this.number=i;var h=this.requiredCheck("number",i);var j=false;if(h.errorMsg){return{isValid:j,error:h}}h=this.regexpCheck("number",i);if(!h.errorMsg){j=true}return{isValid:j,error:h}},checkCode:function(i){var h=this.requiredCheck("checkCode",i);var j=false;this.code=i;if(!h.errorMsg){j=true}return{isValid:j,error:h}},check:function(k,j){var m=[];var l=false;var h=this.checkNumber(k);var i=this.checkCode(j);if(h.isValid&&i.isValid){l=true}m.push(h.error);m.push(i.error);return{isValid:l,error:m}},getCode:function(){var h={key:this.number};g.extend(h,this.getCodeData);return g.ajax({url:this.url,type:this.getCodeAjaxType,data:h,dataType:"json"})},signup:function(){var i={mobile:this.number,vcode:this.code};var h;if(typeof this.submitData==="function"){h=this.submitData()}else{h=this.submitData}g.extend(i,h);return g.ajax({url:this.submitUrl,type:this.signupAjaxType,data:i,dataType:this.signupDataType})}};return f});c("services/phoneUtil",["require"],function(d){return{format:function(e,f){if(!e){return""}if(f==null){return e}return e.replace(/\$\{(.+?)\}/g,function(g,i){var h=f[i];if(typeof h==="function"){h=h(i)}return h==null?"":h})},offsetClass:function(g){if(!g){return""}var e=[];for(var f in g){if(g.hasOwnProperty){if(g[f]){e.push(f)}}}return e.join(" ")}}});c("modules/Phone",["require","jquery","../services/EventTarget","../behaviors/Phone","../services/Phone","../services/phoneUtil"],function(f){var j=f("jquery");var k=f("../services/EventTarget");var e=f("../behaviors/Phone");var g=f("../services/Phone");var d=f("../services/phoneUtil");function i(l){this.init(l);this.onMessage();j.extend(this,this.events);return this}var h='<div class="mod-bols-phone js-mod-bols-phone ${phoneClasses}"><div class="group group-number js-group-number"><label for="${numberId}">${numberText}：</label><div class="group-value"><input type="text" id="${numberId}" placeholder="${numberPlaceHolder}"><button class="btn-large btn-getcode btn-getcode-up js-btn-getcode js-btn-getcode-up ${btnGetCodeUpClasses}" data-type="getcode">${checkNumberText}</button><button class="btn-large btn-getcode btn-getcode-down js-btn-getcode js-btn-getcode-down ${btnGetCodeDownClasses}" data-type="getcode">${getCodeText}</button><span class="error-msg js-error-msg"><span class="error-icon ${errorIconClasses}"></span></span></div></div><div class="group group-number-result"><label>${numberText}：</label><div class="group-value"><span class="number js-number">${number}</span><a href="javascript:;" data-type="changenumber">${changeNumberText}</a></div></div><div class="group group-checkCode js-group-checkCode"><label for="${checkCodeId}">${checkCodeText}：</label><div class="group-value"><input type="text" id="${checkCodeId}" placeholder="${checkCodePlaceHolder}"><button class="btn-large btn-getcode btn-getcode-down js-btn-getcode js-btn-getcode-down ${btnGetCodeDownClasses}" data-type="getcode">${getCodeText}</button><button class="btn-large btn-submit js-btn-submit ${btnSubmitClasses}" data-type="submit">${submitText}</button><span class="error-msg js-error-msg"><span class="error-icon ${errorIconClasses}"></span></span></div></div><div class="group group-button"><button class="btn-large btn-submit js-btn-submit ${btnSubmitClasses}" data-type="submit">${submitText}</button><button class="btn-large btn-cancal ${cancelHidden} ${btnCancelClasses}" data-type="cancel">${cancelText}</button></div></div>';i.prototype={constructor:i,init:function(l){var o=j(l.element);if(o.data("module")!=="phone"){o.html('<div data-module="phone" class="mod-bols-phone-container"></div>');o=o.find('[data-module="phone"]')}this.$moduleEl=o;this.moduleEl=o[0];this.phoneDB=new g();this.phoneDB.setOptions(l);this.events=new k();this.context={phoneDB:this.phoneDB,events:this.events,$moduleEl:this.$moduleEl};this.phoneBehavior=new e(this.context);var m;var n;m=this.phoneDB.getOption("needCreateDom");if(m){n=this.getMainHtml(l);this.$moduleEl.html(n)}},getMainHtml:function(v){var s=this.phoneDB;var m=this.moduleEl;var q={};var t=s.getOption("hasStep");var o=s.getOption("isStepType2");var n=s.getOption("isStepType3");var l={"mod-bols-phone-haslabel":s.getOption("hasLabel"),"mod-bols-phone-inline":s.getOption("isInline"),"mod-bols-phone-step":t,"mod-bols-phone-step1":t&&(s.getOption("step")==1),"mod-bols-phone-step2":t&&(s.getOption("step")==2),"mod-bols-phone-steptype2":o,"mod-bols-phone-steptype3":n,"mod-bols-phone-auto":s.getOption("isAuto")};var p=v.element.id;var u=d.offsetClass(l);j.extend(q,s,{phoneClasses:u,numberId:p+"-number",checkCodeId:p+"-checkcode",cancelHidden:s.getOption("hasCancelButton")?"":"hidden"});var r=d.format(h,q);return r},changeErrorState:function(m){var q=this.phoneDB;var s=this.$moduleEl;var r=q.getOption("msgConfig");var p=m.code||"";if(r[p]){m.errorMsg=r[p]}if(q.getOption("showError")==="alert"){if(m.errorMsg){alert(m.errorMsg)}return}var n=s.find(".js-group-"+m.field);if(m.errorMsg){var l=q.getOption("errorIconClasses");var o='<span class="error-icon '+l+'"></span>'+m.errorMsg;n.addClass("group-error");n.find(".js-error-msg").html(o)}else{n.removeClass("group-error");n.find(".js-error-msg").html("")}},changeAllErrorState:function(m){var l=this;if(j.isArray(m.error)){j.each(m.error,function(o,n){l.changeErrorState(n)})}else{l.changeErrorState(m.error)}},countDownTimeout:null,resetGetCodeButton:function(){clearTimeout(this.countDownTimeout);var o=this.phoneDB;var p=this.$moduleEl;var m=p.find(".js-btn-getcode");var n=p.find(".js-btn-getcode-up");var l=p.find(".js-btn-getcode-down");m.prop("disabled",false);n.html(o.getOption("checkNumberText"));l.html(o.getOption("getCodeText"));o.setOption("isInWaiting",false)},waitSeconds:function(t){var n=this;var p=this.$moduleEl;var o=this.phoneDB;clearTimeout(this.countDownTimeout);function q(){if(t>1){n.countDownTimeout=setTimeout(function(){t--;s();q()},1000)}else{n.resetGetCodeButton()}}function s(){m=d.format(r,{waitSeconds:t});l.html(m)}var n=this;var m;var l=p.find(".js-btn-getcode");var r=o.getOption("waitCheckCodeTpl");l.prop("disabled",true);s();q()},getCode:function(p){var o=this;var n=this.phoneDB;var r=this.$moduleEl;var l=this.events;this.changeAllErrorState(p);var m=n.getOption("number");if(!p.isValid){return}var q=n.getCode();q.done(function(t){if(t.code===0){var s=t.data.reSendSecond||n.getOption("waitSeconds");l.fire("beforeGetCode",m);if(n.getOption("hasStep")&&n.getOption("step")===1){r.find(".js-mod-bols-phone").addClass("mod-bols-phone-step2").removeClass("mod-bols-phone-step1").find(".js-number").text(n.getOption("number"));n.setOption("step",2)}n.setOption("isInWaiting",true);o.waitSeconds(s);l.fire("afterGetCode",m)}else{o.changeErrorState({field:"number",errorMsg:t.msg,code:t.code})}});this.doLog("getCode")},checkSubmit:function(n){var p=this;var q=this.phoneDB;var t=this.events;var r=this.$moduleEl;this.changeAllErrorState(n);if(n.isValid){this.doLog("submit");var m=q.getOption("isSubmit");var l=q.getOption("number");var s=q.getOption("code");if(!m){t.fire("submitFinished",{mobile:l,vcode:s});return}var o=r.find(".js-btn-submit");var u=q.signup();o.prop("disabled",true);u.done(function(v){o.prop("disabled",false);if(v.code===0){p.doLog("submitSuccess");p.changeErrorState({field:"number",errorMsg:""});p.changeErrorState({field:"checkCode",errorMsg:""});t.fire("submitFinished",j.extend({mobile:l,vcode:s},v.data))}else{p.changeErrorState({field:"checkCode",errorMsg:v.msg,code:v.code})}})}},changeNumber:function(){this.phoneDB.setOption("step",1);this.$moduleEl.find(".js-mod-bols-phone").addClass("mod-bols-phone-step1").removeClass("mod-bols-phone-step2");this.resetGetCodeButton()},onMessage:function(){var n=this;var l=this.events;var m=this.phoneDB;l.on("getcode",function(o){n.getCode(o.data)});l.on("check",function(o){n.checkSubmit(o.data)});l.on("changenumber",function(){l.fire("beforeChangeNumber");n.changeNumber();l.fire("afterChangeNumber");m.setOption("isInWaiting",false)});l.on("bhcancel",function(){l.fire("cancel")})},doLog:function(n){var p=this.phoneDB;var o=p.getOption("number");var l=p.getOption("toLog");if(!l){return}try{switch(n){case"getCode":_TongjiLog("qzldh_tjhqyzm_vtel_"+o,"全站留电话提交获取验证码_vtel_"+o);break;case"submit":_TongjiLog("qzldh_ldhtclx1_djtj_utel_"+o,"全站留电话点击提交未验证电话_utel_"+o);break;case"submitSuccess":_TongjiLog("qzldh_djtjyyzdh_tel_"+o,"全站留电话点击提交已验证电话_tel_"+o);break;default:break}}catch(m){}},destroy:function(){try{this.$moduleEl=null;this.moduleEl=null;this.phoneDB=null;this.events=null;this.context=null;this.phoneBehavior.destroy();this.phoneBehavior=null;clearTimeout(this.countDownTimeout)}catch(l){}}};return i});c("phone",["require","jquery","./modules/Phone"],function(d){var g=d("jquery");var f=d("./modules/Phone");var e=1;function h(i){if(!i.element){return}if(!i.element.id){i.element.id="phone"+e++}return new f(i)}return{init:h,type:"phone",vesion:"0.0.2"}});c("jquery",function(){return jQuery});return a("phone")}));(function(b,c){function a(d){if(!(this instanceof a)){return new a(d)}var e={extendMonth:["月份","不确定"],extendDay:["日期","不确定","上旬","中旬","下旬"],mapYM:{}};c.extend(this,e,d);this.$element=c(this.element);this.init()}a.prototype={constructor:a,init:function(){this.initDate();this.bindEvents()},initDate:function(){var h=this;var g=new Date();var f=[g.getFullYear(),g.getFullYear()+1];var d=[];c.each(f,function(j,k){var l=[];var m;if(k===g.getFullYear()){m=g.getMonth()+1}else{m=1}while(m<=12){l.push(m++)}l=h.extendMonth.concat(l);d.push(l);h.mapYM[k]=l});var e=f[0];this.drawSelect(".js-year",f,"年");this.drawSelect(".js-month",this.mapYM[e],"月");this.drawSelect(".js-day",this.getDays(e,"月份"),"日")},drawSelect:function(e,d,g){var f="";c.each(d,function(h,j){var k=/^\d*$/.test(j)?j+g:j;f+='<option value="'+j+'">'+k+"</option>"});this.$element.find(e).html(f)},getDays:function(g,j){var d;var f=/^\d*$/;if(!f.test(g)||!f.test(j)){d=31}else{var h=new Date(g,j,0);d=h.getDate()}var e=1;var k=[];while(e<=d){k.push(e++)}k=this.extendDay.concat(k);return k},getMonth:function(d){return this.mapYM[d]||["月份"]},bindEvents:function(){var d=this;this.$element.on("change",".js-year",function(){var g=c(this);var f=g.val();var e=d.getMonth(f);d.drawSelect(".js-month",e,"月")});this.$element.on("change","js-month",function(){var g=c(this);var f=g.val();var e=c("#year").val();var h=d.getDays(e,f);d.drawSelect(".js-day",h,"日")})},checkDate:function(){var d=this.$element;if(d.find(".js-month").val()==="月份"||d.find(".js-day").val()==="日期"){return false}return true},getDate:function(){var d=this.$element;var g=d.find(".js-year").val();var h=d.find(".js-month").val();var e=d.find(".js-day").val();var f=/^\d*$/;if(f.test(g)){g+="年"}if(f.test(h)){h+="月"}if(f.test(e)){e+="日"}return g+","+h+","+e}};b.TripDate=a})(window,jQuery);(function(e,f){var b=e._;var a=e.phone;var d=e.EventEmitter;var g={};g.phone1Tpl=['<div class="mod-phone mod-phone-smallpic">','<img src="<%= imageUrl %>" class="img">','<p class="title"><%= content %></p>','<div id="mod-phone-wraper">',"</div>",'<p class="hint"><%= remarkContent %></p>',"</div>"].join("");g.phone2Tpl=['<div class="mod-phone-getgift">','<img src="<%= imageUrl %>" style="width:121px;height:116px;" class="img">','<div class="title"><%= bigTitle %></div>','<div class="gift-content"><%= content %></div>','<div id="mod-phone-wraper"></div>','<p class="hint"><%= remarkContent %></p>',"</div>"].join("");g.phone21Tpl=['<div class="mod-phone-getgift mod-phone-getgift-ab">','<div class="title"><%= bigTitle %></div>','<div class="gift-content"><%= content %></div>','<div class="wraper">','<p class="way-title">方式一：旅行顾问向您致电</p>','<div id="mod-phone-wraper"></div>',"</div>",'<div class="split"><span>or</span></div>','<div class="mod-phone-im">','<p class="way-title">方式二：在线咨询</p>','<img src="//f5.sjbly.cn/y15/1130/1618/00qmn_o.png" width="109" height="78">','<p><button data-src="<%= srcPage %>" data-im-msg="<%= talkMsg %>" data-id="<%= talkToId %>" class="js-button-im button-phone-im btn btn-primary webim-online-click">立即咨询</button></p>',"</div>","</div>"].join("");g.phone3Tpl=['<div class="wraper-bg"></div>','<div class="wraper">','<img src="<%= imageUrl %>" style="width:180px;height:200px;" class="img">','<div class="imgcode-wraper"></div>','<div class="imgcode">','<img src="//f4.sjbly.cn/y15/0813/1524/00hfi_o.png" alt="" />','<span class="imgcode-tip icon-phone-imgcode-tip"></span>',"</div>",'<div class="title"><%= bigTitle %></div>','<div id="mod-phone-wraper"></div>',"</div>"].join("");g.success1Tpl=['<div class="mod-success">','<div class="title"><span class="icon-phone-success"></span>提交成功</div>','<div class="hint">旅行顾问将在4小时内与您联系，请保持手机通讯通畅。</div>','<div class="buttons">','<button class="btn-primary btn-large button-close">关闭</button>',"</div>","</div>"].join("");g.success2Tpl=['<div class="mod-success mod-success-large">','<div class="title"><span class="icon-phone-success"></span>提交成功</div>','<div class="hint">旅行顾问将在24小时内（日常工作时间）与您取得联系，请保持通讯畅通。</div>','<div class="buttons">','<button class="btn-primary btn-large button-close">关闭</button>','<p class="mod-success-large-hint">您也可以直接拨打<span>4006-345-100</span>与旅行顾问直接沟通</p>',"</div>","</div>"].join("");g.success3Tpl=['<div class="mod-success mod-success-qrcode">','<div class="title"><span class="icon-phone-success-big"></span>提交成功</div>',"<p>旅行顾问将在4小时内与您联系</p>","<p>也可扫码关注微信直接在线沟通</p>",'<img src="//f4.sjbly.cn/y15/0922/1638/00xai_o.png" alt="" width="227" height="183"/>','<div class="buttons">','<button class="btn btn-primary btn-large button-close">我知道了</button>',"</div>","</div>"].join("");g.success4Tpl=['<div class="mod-phone mod-phone-smallpic">','<img src="<%= imageUrl %>" class="img">','<div class="mod-success mod-success-smallpic">','<div class="title"><span class="icon icon-phone-success2"></span>提交成功</div>','<p class="hint">旅行顾问将在2小时内与您联系，请保持手机通讯通畅。</p>','<div class="infos">',"<p>或直接拨打<span>4006-345-100</span>与顾问直接沟通。</p>","</div>","</div>","</div>"].join("");g.cancelTpl=['<div class="mod-hint mod-hint-phone">','<p class="title"><span>微信定制</span>自由旅行</p>','<p class="hint"><span>资深旅行顾问 1对1 </span>在线服务</p>','<img src="//f4.sjbly.cn/y15/0819/1047/00dwg_o.png" width="347" height="222">',"</div>"].join("");function c(h){if(!(this instanceof c)){return new c(h)}var i={cate:"",type:""};f.extend(this,i,h);f.extend(this,new d());this.init()}c.prototype={constructor:c,getElement:function(){return this.$element},init:function(){var h=this.tplName=this.cate+this.type+"Tpl";var i=g[h];i=b.template(i,this);if(!i){return null}this.$element=f(i);this.bindEvents()},bindEvents:function(){var k=this;var j;var m;var l=this.tplName;var i=this.$element;if(l==="phone1Tpl"){j=i.find("#mod-phone-wraper");m=a.init({element:j,hasStep:true,checkNumberText:this.buttonText,submitText:this.buttonText,submitData:this.submitData,submitUrl:"/r/activity/superseed/",toLog:true,btnGetCodeUpClasses:"btn-primary",btnSubmitClasses:"btn-primary"});m.on("submitFinished",function(n){k.emit("finished",n.data)});m.on("beforeGetCode",function(){i.find(".title").hide()});m.on("afterChangeNumber",function(){i.find(".title").show()})}if(l.indexOf("phone2")>-1){j=i.find("#mod-phone-wraper");var h=true;if(l==="phone21Tpl"){h=false}m=a.init({element:j,submitText:this.buttonText,submitData:this.submitData,hasCancelButton:h,cancelText:"稍后再说",submitUrl:"/r/activity/superseed/",toLog:true,btnSubmitClasses:"btn-primary"});m.on("submitFinished",function(n){k.emit("finished",n.data)});m.on("afterGetCode",function(){k.emit("afterGetCode")});m.on("cancel",function(){k.emit("cancel")})}if(l==="phone3Tpl"){j=i.find("#mod-phone-wraper");m=a.init({element:j,submitText:this.button2Text,submitData:this.submitData,hasStep:true,isStepType3:true,checkNumberText:this.button1Text,submitUrl:"/r/activity/superseed/",checkCodePlaceHolder:"验证码",btnGetCodeUpClasses:"btn-orange",toLog:true});m.on("submitFinished",function(o){k.emit("finished",o.data);if(typeof _fxcmd!=="undefined"){try{_fxcmd.push(["trackEvent","event","cvr5","button5","1"])}catch(n){}}if(typeof _TongjiLog!=="undefined"){_TongjiLog("pinzhong_ctel_"+o.data.mobile,"触发向品众提交")}});m.on("afterGetCode",function(){k.emit("afterGetCode")});m.on("cancel",function(){k.emit("cancel")})}i.on("click",".button-close",function(){k.emit("close")});i.on("click",".js-button-im",function(){k.emit("clickIM")})},destory:function(){try{this.$element.off("click");this.$element=null;this.tplName=null;this.removeAllListeners("close");this.removeAllListeners("finished")}catch(h){}}};e.ModPhone=c})(window,jQuery);(function(g,f){var i=g.TripDate;var b="//is.shijiebang.com";var j=g.EventEmitter;var e=['<div class="mod-goplan mod-goplan-step1">','<div class="hint">您可以继续补充出行细节，这将有助于旅行顾问与您高效的沟通！</div>','<div class="group">','<label class="group-label">拟出发日期：</label>','<div class="group-value">','<div class="date-wraper js-tripdate">','<select class="year js-year">',"</select>",'<select class="month js-month">',"</select>",'<select class="day js-day">',"</select>","</div>",'<p class="group-hint">注：若不确定出行日期，可选择月份/日期不确定。</p>',"</div>","</div>",'<div class="group">','<label class="group-label">旅行天数：</label>','<div class="group-value">','<select name="daynum" class="js-daynum">',"</select>",'<ul class="days-list">',"<li>","<label>",'<input name="trip_type" value="可根据行程安排增减1-2天" checked type="radio">可根据行程安排增减1-2天',"</label>","</li>","<li>","<label>",'<input name="trip_type" value="天数确定，不能更改" type="radio">天数确定，不能更改',"</label>","</li>","</ul>","</div>","</div>",'<div class="buttons">','<button class="btn-primary button button-next" data-step="2">下一步</button>','<button class="btn button button-close">关闭</button>',"</div>","</div>"].join("");var d=['<div class="mod-goplan mod-goplan-step2">','<ul class="continents">','<li class="oneline goplan-bg-red" data-continent="欧洲"><a href="javascript:;">','<div class="continent">欧洲</div>','<div class="countrys"></div></a></li>','<li class="goplan-bg-yellow" data-continent="北美"><a href="javascript:;">','<div class="continent">北美洲</div>','<div class="countrys"></div></a></li>','<li class="right goplan-bg-bule" data-continent="大洋洲"><a href="javascript:;">','<div class="continent">大洋洲</div>','<div class="countrys"></div></a></li>','<li class="goplan-bg-green" data-continent="亚洲及其他地区"><a href="javascript:;">','<div class="continent">亚洲及其他地区</div>','<div class="countrys"></div></a></li>','<li class="right goplan-bg-pink" data-continent="海岛"><a href="javascript:;">','<div class="continent">海岛</div>','<div class="countrys"></div></a></li>','<li class="oneline goplan-bg-purple last" data-continent="无"><a href="javascript:;">','<div class="continent">没有确定目的地，请世界邦推荐</div></a></li>',"</ul>",'<div class="buttons"><a href="javascript:;" class="goback" data-step="1"><span class="icon-phone-back"></span>返回重新选择</a></div>',"</div>"].join("");var c=['<div class="mod-goplan mod-goplan-step3">','<dl class="list countrys-list">',"</dl>",'<div class="buttons">','<button class="btn-primary button button-countrys">确定</button><a href="javascript:;" class="goback mt38" data-step="2"><span class="icon-phone-back"></span>返回重新选择</a>',"</div>","</div>"].join("");var a=['<div class="mod-goplan mod-goplan-step4">','<dl class="list purposes-list">',"<dt>出行目的：</dt>","<dd>休闲度假</dd>","<dd>亲子</dd>",'<dd class="right">陪老人</dd>',"<dd>度蜜月</dd>","<dd>探亲访友</dd>","</dl>",'<div class="buttons">','<button class="btn-primary button button-aims">确定</button>',"</div>","</div>"].join("");function h(k){if(!(this instanceof h)){return new h(k)}var l={continentData:{},selectData:{}};f.extend(this,l,k);f.extend(this,new j());this.init()}h.prototype={constructor:h,getElement:function(){return this.$element},init:function(){var k=e+d+c+a;this.$element=f(k);this.tripdate=i({element:this.$element.find(".js-tripdate")});this.initContinent();this.initDayNum(20);this.bindEvents()},initContinent:function(){var k=this;var l=f.ajax({url:b+"/location/advisor/",type:"get",dataType:"jsonp"});l.done(function(m){if(m.code!==0){alert(m.msg);return}k.continentData=m.data;k.initCountries()})},initCountries:function(){var l=this;var k=["欧洲","北美","大洋洲","亚洲及其他地区","海岛"];f.each(k,function(o,q){var n=l.continentData.countries[q];if(n){var m=[];f.each(n,function(r,s){m.push(s.name)});var p=l.getCountriesStr(m,q);l.$element.find('.continents li[data-continent="'+q+'"] .countrys').text(p)}})},getCountriesStr:function(l,n){var k=4;var m=l.length;var o="";if(n==="欧洲"){k=9}l=m>k?l.slice(0,k):l;o=m>k?l.join("、")+"...":l.join("、");return o},drawSelect:function(l,k){var m="";f.each(k,function(n,o){m+='<option value="'+o+'">'+o+"</option>"});this.$element.find(l).html(m)},initDayNum:function(m){var k=["选择出行天数"];var l=1;while(l<=m){k.push(l+"天");l++}k.push(m+"天以上");this.drawSelect(".js-daynum",k)},checkStep1:function(){var k=this.$element.find(".js-daynum").val();if(!this.tripdate.checkDate()){return{isValid:false,msg:"请选择出发日期。"}}if(k==="选择出行天数"){return{isValid:false,msg:"请选择出行天数。"}}return{isValid:true}},renderCountries:function(m,k){var l="<dt>"+m+"：</dt>";f.each(k,function(n,p){var o="";if(n%4===3){o="right"}l+='<dd data-lid="'+p.lid+'" class="'+o+'">'+p.name+"</dd>"});this.$element.find(".countrys-list").html(l)},bindEvents:function(){var l=this;var k=this.$element;k.on("click",".button-next",function(){var n=f(this).data("step");if(n==2){var m=l.checkStep1();if(!m.isValid){alert(m.msg);return}}l.selectData.startData=l.tripdate.getDate().replace(/,/g,"");l.selectData.days=k.find(".js-daynum").val();l.selectData.trip_type=k.find('input[name="trip_type"]').val();f(".mod-goplan").hide();f(".mod-goplan-step"+n).show();l.emit("step",n);if(typeof _TongjiLog!=="undefined"){_TongjiLog("xqdsjq_1_next","需求单收集器－1下一步")}});k.on("click",".goback",function(){var m=f(this).data("step");f(".mod-goplan").hide();f(".mod-goplan-step"+m).show();l.emit("step",m)});k.on("click",".continents li",function(){var m=f(this).data("continent");l.selectData.continent=m;if(m==="无"){l.emit("finished",l.selectData)}else{l.renderCountries(m,l.continentData.countries[m]);f(".mod-goplan-step2").hide();f(".mod-goplan-step3").show();l.emit("step",3)}});k.on("click",".countrys-list dd",function(){f(this).toggleClass("active")});k.on("click",".button-countrys",function(){if(!k.find(".countrys-list dd.active").length){alert("请选择国家。");return}var m=[];var n=[];k.find(".countrys-list dd.active").each(function(p,q){var o=f(q);m.push(o.text());n.push(o.data("lid"))});l.selectData.counties=m;l.selectData.country_lids=n;f(".mod-goplan-step3").hide();f(".mod-goplan-step4").show();l.emit("step",4);if(typeof _TongjiLog!=="undefined"){_TongjiLog("xqdsjq_2_confirm","需求单收集器－2确定")}});k.on("click",".purposes-list dd",function(){f(this).toggleClass("active")});k.on("click",".button-aims",function(){if(!k.find(".purposes-list dd.active").length){alert("请选择出行目的。");return}var m=[];k.find(".purposes-list dd.active").each(function(o,p){var n=f(p);m.push(n.text())});l.selectData.purposes=m;l.emit("finished",l.selectData);if(typeof _TongjiLog!=="undefined"){_TongjiLog("xqdsjq_last_confirm","需求单收集器－最后确定")}});k.on("click",".button-close",function(){l.emit("close");if(typeof _TongjiLog!=="undefined"){_TongjiLog("xqdsjq_1_close","需求单收集器－1关闭")}})},destory:function(){try{this.$element.off("click");this.$element=null;this.removeAllListeners("close");this.removeAllListeners("finished")}catch(k){}}};g.ModGoPlan=h})(window,jQuery);(function(f,c){var g=f.PhoneDialog;var h=f.ModGoPlan;var b=f.ModPhone;var j=f.EventEmitter;function d(m){var n=g(m.dialogOpt);var l=b(m.phoneOpt);var k=l.getElement();n.append(k);n.show();return{dialog:n,phone:l}}function a(l){var m=g(l.dialogOpt);var n=h(l.goPlanOpt);var k=n.getElement();m.append(k);m.show();return{dialog:m,goPlan:n}}function e(){var m=new Date();var o="";var l=m.getFullYear();var n=m.getMonth()+1;var k=m.getDate();o+=l<10?"0"+l:l;o+=n<10?"0"+n:n;o+=k<10?"0"+k:k;return o}function i(l){var q={zIndex:20000,dialogClasses:"dialog mod-goplan-dialog",isStep:true,title:"第1步",stepText:"还剩2步",hasClose:false,hasOverlay:false};l=l||{};var k=l.url||"/r/activity/superseed/extra/";var n={};var o=a({dialogOpt:q,goPlanOpt:n});var m=o.dialog;var p=o.goPlan;m.on("close",function(){p.destory();alert("close")});p.on("close",function(){p.destory();m.close()});p.on("step",function(s){var t;var r;switch(s){case 1:t="第1步";r="还剩2步";break;case 2:t="第2步";r="还剩1步";break;case 3:t="第2步";r="还剩1步";break;case 4:t="最后1步";r="";break}m.setTitle(t);m.setStepText(r)});p.on("finished",function(s){var r=l.submitData;r.activity_id=e()+l.submitData.aid;r.extra=JSON.stringify(s);var t=c.ajax({url:k,type:"post",dataType:"json",data:r});t.done(function(u){if(u.code!==0){alert(u.msg)}else{p.destory();m.close();f.goPlan.emit("finished")}})})}f.goPlan=c.extend({init:i},new j())})(window,jQuery);(function(g,d){var k=g._;var e=g.PhoneDialog;var m=g.ModPhone;var h=g.goPlan;var a=new g.EventEmitter();var l;var n=false;var v=false;var c={"pc-smallpic-pop":{dialogOpt:{dialogClasses:"dialog mod-phone-dialog reg-phone-dialog-smallpic reg-phone-dialog-animate",hasOverlay:false,selfClose:false,hasHead:false,closeIconClasses:"icon-phone-close3"},phoneOpt:{cate:"phone",type:"1"}},"pc-bigpic-pop":{dialogOpt:{dialogClasses:"dialog mod-phone-dialog reg-phone-dialog-bigpic reg-phone-dialog-animate",hasOverlay:false,selfClose:false},phoneOpt:{cate:"phone",type:"2"}},"pc-bigpic-pop-ab":{dialogOpt:{dialogClasses:"dialog mod-phone-dialog",hasOverlay:false,selfClose:false},phoneOpt:{cate:"phone",type:"21"}},"pc-suspend-pop":{dialogOpt:{dialogClasses:"mod-phone-buttom mod-phone-dialog",hasHead:false,isAuto:true,canResize:false,isFixed:true,closeIconClasses:"icon-phone-close",hasOverlay:false,selfClose:false},phoneOpt:{cate:"phone",type:"3"}},success1:{dialogOpt:{dialogClasses:"dialog mod-phone-dialog",hasOverlay:false},phoneOpt:{cate:"success",type:"1"}},success2:{dialogOpt:{dialogClasses:"dialog mod-phone-dialog",hasOverlay:false},phoneOpt:{cate:"success",type:"2"}},success3:{dialogOpt:{dialogClasses:"dialog mod-phone-dialog",hasOverlay:false,hasClose:false,hasHead:false},phoneOpt:{cate:"success",type:"3"}},success4:{dialogOpt:{dialogClasses:"dialog mod-phone-dialog reg-phone-dialog-smallpic",hasOverlay:false,hasHead:false,closeIconClasses:"icon-phone-close3"},phoneOpt:{cate:"success",type:"4"}},cancel:{dialogOpt:{dialogClasses:"dialog mod-phone-dialog",hasOverlay:false,hasFoot:true,submitText:"我知道了",submitClasses:"mod-hint-phone-submit"},phoneOpt:{cate:"cancel"}}};function i(){var z={};var u=allPhone.phoneType;if(u==="pc-suspend-pop"){z={left:"-"+d(g).width()+"px"}}else{var A=d(".js-sys-right-toolbar-phone");z={left:A.offset().left-d(g).scrollLeft()+A.width()/2+"px",top:A.offset().top-d(g).scrollTop()+A.height()/2+"px",opacity:0,scaleX:0,scaleY:0}}return z}function b(u){var A={};var z=allPhone.phoneType;if(z==="pc-suspend-pop"){A={left:0}}else{var B=u.getPos();A={left:B.left+"px",top:B.top+"px",opacity:1,scaleX:1,scaleY:1}}return A}function w(u){if(typeof phoneConfig==="undefined"){phoneConfig={}}u=u||phoneConfig.phoneAlertType||"";if(u==="pack"||u==="powerdetail"){return false}return true}function o(A){if(!w()){A.dialogOpt.dialogClasses=A.dialogOpt.dialogClasses.replace(/reg-phone-dialog-animate/g,"")}var B=e(A.dialogOpt);var z=m(A.phoneOpt);var u=z.getElement();B.append(u);g.allPhone.dialog=B;if(A.phoneOpt.cate!=="phone"||!w()){B.show()}else{var D=i();var C=b(B);g.sysRightToolBar.addShake();B.$element.velocity(D,0).velocity(C,{duration:1000,easing:"ease-in",complete:function(){if(allPhone.phoneType!=="pc-suspend-pop"){a.emit("afterShow")}}})}allPhone.isOpen=true;if(allPhone.phoneType==="pc-suspend-pop"){a.emit("afterShow")}return{dialog:B,phone:z}}function x(){var B=phoneConfig.phoneAlertType;var C=phoneConfig.phoneAlertData[B];var u={};if(B==="pack"){var A=SER_DATA.sourceID;var z=k.filter(C,function(E){E.range=E.range||"";var D=E.range.split(",");return k.indexOf(D,""+A)>-1});if(z.length){u=k.max(z,function(D){return parseInt(D.priority||0)});return u}}u=k.find(C,function(D){return/.*-common$/.test(D.pop_type)});return u}function t(u){var z={zIndex:u.zIndex};d.extend(z,c.cancel.dialogOpt);var A=o({dialogOpt:z,phoneOpt:c.cancel.phoneOpt});allPhone.isOpen=true;A.dialog.on("close",function(){A.phone.destory();allPhone.isOpen=false})}function s(u){if(w()){var z=i();g.sysRightToolBar.addShake(500);u.$element.velocity(z,{duration:1000,easing:"ease-in-out",complete:function(){u.close();if(allPhone.phoneType==="pc-suspend-pop"){g.allPhoneSuspendEntry.showSuspendEntry()}}})}else{u.close()}}function j(z){var B=o({dialogOpt:z.dialogOpt,phoneOpt:z.phoneOpt});var A=B.dialog;var u=B.phone;A.on("close",function(){u.destory();if(z.popWeixin==1){A.close();t({zIndex:z.dialogOpt.zIndex})}else{s(A)}a.emit("closeDialog");allPhone.isOpen=false});u.on("cancel",function(){u.destory();s(A);a.emit("submitCancel");allPhone.isOpen=false});u.on("clickIM",function(){u.destory();A.close();a.emit("clickIM")});function C(D){return function(){var F="success1";if(z.phoneOpt.type==2){F="success2"}if(z.phoneOpt.type==1){F="success4"}var E={zIndex:z.dialogOpt.zIndex,successType:F,requireCollect:z.requireCollect,popWeixin:z.popWeixin,imageUrl:z.phoneOpt.imageUrl};if(z.requireCollect==1){h.init({submitData:D});h.on("finished",function(){E.successType="success3";f(E)})}else{f(E)}}}u.on("finished",function(E){u.destory();A.close();allPhone.isSuccess=true;allPhone.isOpen=false;r("phone_popnum_success","true");a.emit("afterSubmit",E);var F="尊敬的邦客，我是您的专属旅行顾问，为了定制和挑选最适合您的行程，需要了解您的出行需求。您打算几月去哪些国家，我会在线与您沟通；如需我免费回电至您的电话"+E.mobile+"，直接回复 “1”即可";if(g.allPhoneIM.switchForIM){if(z.phoneOpt.submitData){var D=z.phoneOpt.submitData.rf0||"";D=D.toLowerCase();if(D!=="supers_pc"&&D!=="power_pc"){g.allPhoneIM.openIMForNewUser(F,E.mobile,C(E))}}}else{C(E)()}})}function y(J){var H=c[J.phoneType];if(!H){return}allPhone.phoneType=J.phoneType;var B=J.popExtra;var F={title:J.title,zIndex:J.zIndex};var A=d.extend({},J,J.popExtra.extra);delete F.popExtra;d.extend(A,H.phoneOpt);d.extend(F,H.dialogOpt);var I=B.popNum;var D="phone_popnum_"+J.pageType;var E=d.cookie(D)?+d.cookie(D):0;var G=B.maxPopNum;var z="phone_popnum_max";var u=d.cookie(z)?+d.cookie(z):0;var C=d.cookie("phone_popnum_success")==="true"?true:false;if((E<I&&u<G&&!C)||J.forceAlert){allPhone.openSetTimeout=setTimeout(function(){j({dialogOpt:F,phoneOpt:A,requireCollect:B.requireCollect,popWeixin:B.popWeixin});if(typeof _TongjiLog!=="undefined"){_TongjiLog("qzldh_jctctcsl","全站留电话监测弹窗弹出数量")}if(!J.forceAlert){r(D,++E);r(z,++u)}},B.popTime*1000)}}function r(u,A){var z=new Date();var B=new Date(z.getFullYear(),z.getMonth(),z.getDate()+1);d.cookie(u,A,{expires:B,path:"/",domain:".shijiebang.com"})}function q(A){A=A||{};if(!(typeof phoneConfig!=="undefined"&&phoneConfig.phoneAlertType&&phoneConfig.phoneAlertData)){return}var u=x();if(!u){return}if(A.pop_extra){d.extend(u.pop_extra,A.pop_extra);delete A.pop_extra}var B=u.pop_type.replace(/-common$/,"").replace(/-custom$/,"");d.extend(u,A,{phoneType:B});allPhone.alertConfig=u;var z=u.pop_extra;y({pageType:phoneConfig.phoneAlertType,phoneType:B,popWay:u.pop_way,title:u.title||"",bigTitle:u.big_title||"",content:u.content||"",imageUrl:u.image_url,remarkContent:u.remark_content||"",buttonText:u.button_text||"提交",button1Text:u.button1_text||"免费咨询",button2Text:u.button2_text||"免费咨询",popExtra:{popNum:z.pop_num,maxPopNum:z.pop_max_num,popTime:typeof z.pop_time!==undefined?parseInt(z.pop_time):25,sf:z.sf,requireCollect:z.require_collect,popWeixin:z.pop_weixin,extra:z.extra},forceAlert:u.forceAlert||false,submitData:d.extend({rf0:z.sf,title:"全站留电话",a_type:46,extra:"{}"},u.submit_data||{})})}function f(A){A=A||{};var z=A.requireCollect||2;var u=A.popWeixin||2;var C=A.successType||"success2";var B={zIndex:A.zIndex};B=d.extend(B,c[C].dialogOpt);var E=d.extend({},c[C].phoneOpt,{imageUrl:A.imageUrl||""});var D=o({dialogOpt:B,phoneOpt:E});D.dialog.on("close",function(){D.phone.destory();if(z!=1&&u==1){t(A)}allPhone.isOpen=false});D.phone.on("close",function(){D.phone.destory();D.dialog.close();if(z!=1&&u==1){t(A)}if(typeof _TongjiLog!=="undefined"){_TongjiLog("xqdsjq_okclose","需求单收集器－提交成功关闭")}a.emit("submitClose");allPhone.isOpen=false})}function p(u){h.init(u);h.on("finished",function(){f()})}g.allPhone=d.extend(a,{init:q,initPhone:y,initGoPlan:p,isNeedAnimation:w,openSetTimeout:l,isOpen:n,isSuccess:v,alertConfig:{}});d(function(){g.allPhone.init();allPhone.on("afterSubmit",function(z){if(typeof _fxcmd!=="undefined"){try{switch(phoneConfig.phoneAlertType){case"sem":_fxcmd.push(["trackEvent","event","cvr3","button3","1"]);if(typeof _TongjiLog!=="undefined"){_TongjiLog("pinzhong_ctel_"+z.mobile,"触发向品众提交")}break;case"pack":_fxcmd.push(["trackEvent","event","cvr7","button7","1"]);if(typeof _TongjiLog!=="undefined"){_TongjiLog("pinzhong_ctel_"+z.mobile,"触发向品众提交")}break;default:break}}catch(u){}}})})})(window,jQuery);(function(c){var a={};function b(){}var d=['<div class="sys-animate-phone-suspend js-sys-suspend-phone-entry">','<img src="//f6.sjbly.cn/y16/0603/1501/00xff_o.png" alt="" />',"</div>"].join("");window.allPhoneSuspendEntry={$suspendEntryEle:null,isSuspend:false,isClicked:false,init:function(){this.isSuspend=a.phoneType==="pc-suspend-pop";if(this.isSuspend){this.createSuspendEntry()}},createSuspendEntry:function(){var f=this;var e=this.$suspendEntryEle=c(d);e.appendTo("body");if(c.cookie("phone_popnum_success")){e.addClass("show")}e.on("click",function(){if(f.isClicked){return}f.isClicked=true;clearTimeout(window.allPhone.openSetTimeout);f.hideSuspendEntry(function(){allPhone.init({pop_extra:{pop_time:0},forceAlert:true})})})},showSuspendEntry:function(g){var f=this;g=g||b;var e=function(){g();f.isClicked=false};this.$suspendEntryEle.velocity({left:0},{duration:600,complete:e})},hideSuspendEntry:function(g){var f=this;g=g||b;var e=function(){g();f.isClicked=false};this.$suspendEntryEle.velocity({left:"-154px"},{duration:600,complete:e})}};c(function(){if(window.allPhone&&allPhone.isNeedAnimation()){a=allPhone.alertConfig;allPhoneSuspendEntry.init()}})})(jQuery);(function(b){var a={openWin:null,updateTotalUnreadHandlers:[],lastUnReadNum:0,pageOldTitle:document.title,addUpdateTotalUnreadHandler:function(c){this.updateTotalUnreadHandlers.push(c)},getUnReadNumHtml:function(){return(+this.lastUnReadNum>99)?"99<span>+</span>":this.lastUnReadNum},shakeTitleInterval:null,addTitleShake:function(){clearInterval(this.shakeTitleInterval);var d=this.lastUnReadNum;if(d){d=d>99?"99+":d;var c=0;var g="【"+d+"条未读消息】 "+this.pageOldTitle;var h="";for(var f=0;f<Math.ceil(d.toString().length/2);f++){h+="　"}var e="【"+h+"　　　　　】"+this.pageOldTitle;this.shakeTitleInterval=setInterval(function(){document.title=(c?e:g);c^=1},1000)}else{document.title=this.pageOldTitle}},init:function(){var c=this;b.sjbimSub("imInit",function(f,d){c.openWin=d;window.sysRightToolBar&&sysRightToolBar.clearAllInterval&&sysRightToolBar.clearAllInterval();var g=b.sjbwebimHooks.getCurrentWebchat();g.setChatEventHandler(b.MessagingSdk.ChatEvent.UPDATE_TOTAL_UNREAD,function(e){c.lastUnReadNum=e;c.addTitleShake();for(var h=c.updateTotalUnreadHandlers.length-1;h>=0;h--){c.updateTotalUnreadHandlers[h](e)}})});this.bindOpenIMCustomEvents()},bindOpenIMCustomEvents:function(){b(".webim-online-click-custom").on("click",function(){var e=b(this);var c=e.data("id");var d=["您好，欢迎光临世界邦旅行网，看到您正在浏览 "+location.href+" ，您打算几月份去呢？"];window.allPhoneIM.onceOneDayLocalStorage(location.pathname.replace(/\//g,"-"),function(){window.allPhoneIM.openIM(d,c)},function(){window.allPhoneIM.openIM("",c)});return false});b("body").on("click",".js-webim-online-click-page",function(){var c=193006;var d=["您好，欢迎光临世界邦旅行网，看到您正在浏览 "+location.href+" ，您打算几月份去呢？"];window.allPhoneIM.onceOneDayLocalStorage(location.pathname.replace(/\//g,"-"),function(){window.allPhoneIM.openIM(d,c)},function(){window.allPhoneIM.openIM("",c)});return false});b("body").on("click",".js-phone-click-page",function(){clearTimeout(allPhone.openSetTimeout);allPhone.init({pop_extra:{pop_time:0},forceAlert:true})})}};window.sysImMsg=a;b(function(){a.init()})})(jQuery);(function(b){var g=window.localStorage||{setItem:function(l){},getItem:function(l){},removeItem:function(l){}};var f={};function j(){}var c='<div class="sys-right-toolbar js-sys-right-toolbar"></div>';var e=['<div class="sys-right-toolbar-tip js-sys-right-toolbar-tip-phone">','<div class="icon icon-sys1-t-arrow"></div>','<img src="//f6.sjbly.cn/y16/0624/1058/00cwr_o.png" alt="">','<p class="sys-right-toolbar-tip-info">顾问免费致电解决出游难题</p>',"</div>"].join("");var a=['<div class="sys-right-toolbar-tip js-sys-right-toolbar-tip-im">','<div class="icon icon-sys1-t-arrow-blue"></div>','<img src="//f4.sjbly.cn/y16/0623/1125/00ujt_o.png" alt="">','<p class="sys-right-toolbar-tip-info"><em class="js-sys-right-toolbar-uncount"></em></p>','<p class="sys-right-toolbar-tip-info">未读消息</p>',"</div>"].join("");var h=['<div class="sys-right-toolbar-tip sys-right-toolbar-tip-im-page js-sys-right-toolbar-tip-im-page">','<div class="icon icon-sys1-t-arrow-blue-top"></div>','<img src="//f6.sjbly.cn/y16/0706/1344/00cap_o.png" alt="">','<p class="sys-right-toolbar-tip-info"><em class="js-sys-right-toolbar-uncount"></em></p>','<p class="sys-right-toolbar-tip-info">未读消息</p>',"</div>"].join("");var i=['<div class="sys-right-toolbar-bigbd">','<div class="sys-right-toolbar-icon icon-sys1-close js-sys-right-toolbar-close"></div>','<div class="sys-right-toolbar-img">','<img src="//f4.sjbly.cn/y16/0623/1125/00gbh_o.jpg" alt=""></div>','<ul class="sys-right-toolbar-list">','<li class="sys-right-toolbar-item sys-right-toolbar-item-phone">','<p class="sys-right-toolbar-title">安排顾问致电</p>','<p class="sys-right-toolbar-info">旅行顾问免费致电，解决出游难题</p>','<a href="javascript:;" class="sys-right-toolbar-button btn-orange js-sys-right-toolbar-phone">','<i class="icon icon-sys1-phone"></i>立即安排',"</a>",e,"</li>",'<li class="sys-right-toolbar-item sys-right-toolbar-item-im">','<p class="sys-right-toolbar-title">在线咨询</p>','<a href="javascript:;" class="sys-right-toolbar-button btn-primary js-sys-right-toolbar-im">','<i class="icon icon-sys1-im"></i>立即咨询',"</a>",a,"</li>","</ul>","</div>"].join("");var d=['<div class="sys-right-toolbar-smallbd">','<ul class="sys-right-toolbar-list">','<li class="sys-right-toolbar-item sys-right-toolbar-item-phone">','<a href="javascript:;" class="sys-right-toolbar-button js-sys-right-toolbar-phone">','<i class="icon icon-sys1-phone"></i>',"<p>顾问致电</p>","</a>",e,"</li>",'<li class="sys-right-toolbar-item sys-right-toolbar-item-im">','<a href="javascript:;" class="sys-right-toolbar-button js-sys-right-toolbar-im">','<i class="icon icon-sys1-im"></i>',"<p>在线咨询</p>","</a>",a,"</li>","</ul>","</div>"].join("");window.sysRightToolBar={$ele:null,isBig:true,isPhoneTipShow:true,isImTipShow:false,isClicked:false,tipShakeInterval:null,pageTipShakeInterval:null,isNoLogined15s:false,init:function(){var k=this;var l=this.$ele=b(c);if(!f.phoneType){l.addClass("sys-right-toolbar-small sys-right-toolbar-onlyim").html(d)}else{if(!b.cookie("sys_right_toolbar_issmall")){l.addClass("sys-right-toolbar-big").html(i)}else{l.addClass("sys-right-toolbar-small").html(d)}}l.appendTo(b("body"));this.bindEvents();if(!b.cookie("z")){setTimeout(function(){if(k.shouldShowImTip()){k.isNoLogined15s=true;k.$ele.find(".js-sys-right-toolbar-tip-phone").hide();k.setUnReadNum(window.sysImMsg.lastUnReadNum||1,k.$ele.find(".js-sys-right-toolbar-uncount"));k.$ele.find(".js-sys-right-toolbar-tip-im").show();k.addIMTipShake()}},15*1000)}},setUnReadNum:function(l,k){var m=(+l>99)?"99<span>+</span>":l;k.html(m)},tipShake:function(k){k.velocity("stop",0).velocity({opacity:1},0).velocity({opacity:0},{duration:250,loop:5})},addIMTipShake:function(){var k=this;var l=this.$ele.find(".js-sys-right-toolbar-tip-im .sys-right-toolbar-tip-info");this.removeIMTipShake();this.tipShakeInterval=setInterval(function(){k.tipShake(l)},6000);this.tipShake(l)},removeIMTipShake:function(){clearInterval(this.tipShakeInterval)},clearAllInterval:function(){clearInterval(this.tipShakeInterval);clearInterval(this.pageTipShakeInterval)},shouldShowImTip:function(){var l=g.getItem("sjb-webim-tip15s");var k=new Date().getTime();if(l&&(k-l<86400000)){return false}return true},bindEvents:function(){var k=this;this.$ele.on("click",".js-sys-right-toolbar-close",function(){k.$ele.addClass("sys-right-toolbar-small").removeClass("sys-right-toolbar-big").html(d);if(!k.isPhoneTipShow){k.$ele.find(".js-sys-right-toolbar-tip-phone").hide()}if(k.isImTipShow){k.setUnReadNum(window.sysImMsg.lastUnReadNum,k.$ele.find(".js-sys-right-toolbar-uncount"));k.$ele.find(".js-sys-right-toolbar-tip-im").show()}b.cookie("sys_right_toolbar_issmall",true,{expires:30,path:"/",domain:".shijiebang.com"})});this.$ele.on("click",".js-sys-right-toolbar-phone, .js-sys-right-toolbar-tip-phone",function(){if(k.isClicked){return}k.isClicked=true;if(typeof _TongjiLog!=="undefined"){_TongjiLog("qzycxf_djdh","点击电话")}if(window.allPhone.isOpen){if(allPhone.dialog&&allPhone.dialog.emit){allPhone.dialog.emit("close")}k.isClicked=false;return}clearTimeout(window.allPhone.openSetTimeout);if(window.allPhoneSuspendEntry&&allPhoneSuspendEntry.isSuspend){allPhoneSuspendEntry.hideSuspendEntry(function(){allPhone.init({pop_extra:{pop_time:0},forceAlert:true})})}else{allPhone.init({pop_extra:{pop_time:0},forceAlert:true})}});allPhone.on("afterShow",function(){k.$ele.find(".js-sys-right-toolbar-tip-phone").hide();k.isPhoneTipShow=false;k.isClicked=false});if(!(window.allPhoneSuspendEntry&&allPhoneSuspendEntry.isSuspend)){allPhone.on("closeDialog",function(){k.isClicked=false});allPhone.on("submitCancel",function(){k.isClicked=false});allPhone.on("afterSubmit",function(){k.isClicked=false})}k.$ele.on("click",".js-sys-right-toolbar-im, .js-sys-right-toolbar-tip-im",function(){if(typeof _TongjiLog!=="undefined"){_TongjiLog("qzycxf_djim","点击IM")}if(k.isNoLogined15s){var l=["您好，欢迎光临世界邦旅行网","看到您正在浏览 "+location.href+" ，您计划去哪个国家旅行呢亲？我们会根据您具体的出行天数和月份，来为您设计路线"];window.allPhoneIM.openIMToUser(l,193006);k.isNoLogined15s=false;g.setItem("sjb-webim-tip15s",new Date().getTime())}else{window.sysImMsg&&sysImMsg.openWin&&sysImMsg.openWin()}k.$ele.find(".js-sys-right-toolbar-tip-phone").hide();k.$ele.find(".js-sys-right-toolbar-tip-im").hide()});window.sysImMsg&&sysImMsg.addUpdateTotalUnreadHandler&&sysImMsg.addUpdateTotalUnreadHandler(function(l){k.setUnReadNum(l,k.$ele.find(".js-sys-right-toolbar-uncount"));if(k.isPhoneTipShow){k.isPhoneTipShow=false;k.$ele.find(".js-sys-right-toolbar-tip-im").hide()}k.removeIMTipShake();if(+l>0){k.isImTipShow=true;k.$ele.find(".js-sys-right-toolbar-tip-phone").hide();k.$ele.find(".js-sys-right-toolbar-tip-im").show();k.addIMTipShake()}else{k.isImTipShow=false;k.$ele.find(".js-sys-right-toolbar-tip-im .sys-right-toolbar-tip-info").velocity("stop",0).velocity({opacity:1},0);k.$ele.find(".js-sys-right-toolbar-tip-im").hide()}})},addShake:function(k){k=k||0;this.$ele.find(".js-sys-right-toolbar-phone .icon").velocity({rotateZ:"0deg"},{duration:0,delay:k}).velocity({rotateZ:"15deg"},80).velocity({rotateZ:"-15deg"},170).velocity({rotateZ:"15deg"},170).velocity({rotateZ:"-15deg"},170).velocity({rotateZ:"15deg"},170).velocity({rotateZ:"-15deg"},170).velocity({rotateZ:"0deg"},80)},initPagesImUnRead:function(){var m=this;var k=b(".js-webim-msg-unread");if(!k.length){return}k.css("position","relative");var l=b(h).appendTo(k);var n=l.find(".js-sys-right-toolbar-uncount");var o=l.find(".sys-right-toolbar-tip-info");window.sysImMsg&&sysImMsg.addUpdateTotalUnreadHandler&&sysImMsg.addUpdateTotalUnreadHandler(function(p){m.setUnReadNum(p,n);clearInterval(m.pageTipShakeInterval);if(+p>0){l.show();m.pageTipShakeInterval=setInterval(function(){m.tipShake(o)},6000);m.tipShake(o)}else{o.velocity("stop",0).velocity({opacity:1},0);l.hide()}})}};b(function(){if(window.allPhone&&allPhone.isNeedAnimation()){f=allPhone.alertConfig;sysRightToolBar.init()}sysRightToolBar.initPagesImUnRead()})})(jQuery);(function(g,d){var n;var k;var f;var a;var h;var i;var q;var c=new g.EventEmitter();var r=['<div class="mod-allim" style="background-image:url(${pic});">','<a href="javascript:void(0);" class="close js-close"><i class="icon-close icon-phone-close2"></i>关闭</a>','<div class="content">','<p class="des">${describe}</p>','<p class="btns">','<a href="javascript:;" class="button-chat js-btn-chat">${buttonText}</a>',"</p>",'<i class="icon-arrow icon-phone-arrow"></i>',"</div>","</div>"].join("");function m(s,t){if(!s){return""}if(t==null){return s}return s.replace(/\$\{(.+?)\}/g,function(u,w){var v=t[w];if(typeof v==="function"){v=v(w)}return v==null?"":v})}function e(s){var t=m(r,s);return d(t)}function p(){var s=f.offset();return{left:s.left-n.$element.width()-7,bottom:0}}function o(){clearTimeout(a);n.$element.animate({bottom:i.bottom},1000,function(){n.close()})}function j(s){f=d("#sjb-webim-entry");if(!f.length){return}k=e(s);n=g.PhoneDialog({hasHead:false,dialogClasses:"dialog mod-dialog-noshadow mod-dialog-allim",hasOverlay:false,canResize:false,selfClose:false,hasClose:false});n.append(k);h=p();i={left:h.left,bottom:-n.$element.height()};n.setCss(i);n.$element.animate({bottom:h.bottom},1000);n.show();n.on("close",function(){o();allIM.emit("imDialog:close")});if(s.popDisappearTime){a=setTimeout(function(){o()},s.popDisappearTime*1000)}b()}function l(s){q=s.sf;var t="im_popnum_"+q;var u=d.cookie(t)||0;u=parseInt(u);if(u>=s.popNum){return}var v={title:"为您解决自由行难题",describe:"您好，您对线路有任何疑问或者有任何自由行难题，旅行顾问很乐意为您解答。您可以点击在线沟通按钮进行咨询。",pic:"//s2.sjbly.cn/res/img/allim/logo.png",buttonText:"在线沟通",popNum:5};s=d.extend(v,s);setTimeout(function(){j(s);var w=new Date();var x=new Date(w.getFullYear(),w.getMonth(),w.getDate()+1);d.cookie(t,++u,{expires:x,path:"/",domain:".shijiebang.com"})},s.popTime*1000)}function b(){k.on("click",".js-btn-chat",function(){clearTimeout(a);n.$element.animate({bottom:i.bottom},1000,function(){n.close();if(q==="pack"){d(".bt-im").trigger("click")}else{f.trigger("click")}if(typeof _TongjiLog!=="undefined"){_TongjiLog("djyxjfczxzxan","点击右下角浮层在线咨询按钮")}})})}g.allIM=_.extend({init:l},c);d(function(){if(typeof allAlertIMConfig!=="undefined"){g.allIM.init(allAlertIMConfig)}})})(this,jQuery);